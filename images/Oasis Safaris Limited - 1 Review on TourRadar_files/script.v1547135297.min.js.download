function AOCommonNps(){var e=this,t=common;e.ASK_QUESTION="ask_question",e.DOWNLOAD_BROCHURE="download_brochure",e.initiate=function(t,n){switch(e.email=t,n){case e.ASK_QUESTION:e.eventActionPrefix="Ask a question";break;case e.DOWNLOAD_BROCHURE:e.eventActionPrefix="Download Brochure"}e.source=n,e.collect.initiate(),e.feedback.initiate()},e.collect={initiate:function(){var t=e.collect;e.$section=$(".js-ao-common-nps"),e.$section.length&&(t.$collectSection=e.$section.find(".js-ao-common-nps__collect"),t.$confirmButton=t.$collectSection.find(".js-ao-common-nps__collect-confirm"),t.$scoreButton=t.$collectSection.find(".js-ao-common-nps__collect-list-score"),t.$confirmButton.length&&t.$confirmButton.click(t.onClickConfirm),t.$scoreButton.click(t.onClickScore))},onClickConfirm:function(){var n=e.collect,i=n.$collectSection.find(".js-ao-common-nps__collect-list-score.ao-common-nps__collect-list-score--active"),o=parseInt(i.data("score"),10);t.send_request("/welcome/collect_nps",{source:e.source,score:o,email:e.email},function(i){"OK"===i.status?(e.id=i.id,n.$collectSection.remove(),e.feedback.$feedbackSection.removeClass("ao-common-nps__feedback--hidden"),t.send_google_event("NPS",e.eventActionPrefix+" - Rate",o)):"error"===i.status&&alert(i.message)})},onClickScore:function(){var t=e.collect;t.$confirmButton.length&&t.$confirmButton.prop("disabled",!1).addClass("aa-btn--primary"),t.$scoreButton.toggleClass("ao-common-nps__collect-list-score--active",!1),$(this).toggleClass("ao-common-nps__collect-list-score--active",!0),t.$confirmButton.length||t.onClickConfirm()}},e.feedback={MIN_CHARACTER_LIMIT:1,initiate:function(){var t=e.feedback;e.$section.length&&(t.$feedbackSection=e.$section.find(".js-ao-common-nps__feedback"),t.$feedbackReason=t.$feedbackSection.find(".js-ao-common-nps__feedback-reason"),t.$submitFeedback=t.$feedbackSection.find(".js-ao-common-nps__feedback-cta"),t.$feedbackReason.on("keyup",t.onKeyUp),t.$submitFeedback.click(t.onClickSubmit))},onKeyUp:function(){var t,n=e.feedback;return n.$feedbackReason.val().trim().length<n.MIN_CHARACTER_LIMIT?(n.$submitFeedback.toggleClass("aa-btn--primary",!1),n.$submitFeedback.prop("disabled",!0),t=!1):(n.$submitFeedback.toggleClass("aa-btn--primary",!0),n.$submitFeedback.prop("disabled",!1),t=!0),t},onClickSubmit:function(){t.send_request("/welcome/submit_nps_message",{id:e.id,message:e.feedback.$feedbackReason.val().trim()},function(t){"OK"===t.status?(e.source===e.DOWNLOAD_BROCHURE&&$.magnificPopup.close(),e.$section.remove()):"error"===t.status&&alert(t.message)})}}}function Func(){var e=this;e.check_string=function(e,t){switch(t){case"email":return/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}},e.ucfirst=function(e){return(e+="").charAt(0).toUpperCase()+e.substr(1)},e.number_format=function(e,t,n,i){e=(e+"").replace(",","").replace(" ","");var o=isFinite(+e)?+e:0,a=isFinite(+t)?Math.abs(t):0,r=void 0===i?",":i,s=void 0===n?".":n,c="";return(c=(a?function(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}(o,a):""+Math.round(o)).split("."))[0].length>3&&(c[0]=c[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,r)),(c[1]||"").length<a&&(c[1]=c[1]||"",c[1]+=new Array(a-c[1].length+1).join("0")),c.join(s)},e.set_cookie=function(e,t,n,i,o,a){if(n){var r=new Date;r.setTime(r.getTime()+1e3*n),n=r.toGMTString()}document.cookie=e+"="+escape(t)+(n?"; expires="+n:"")+(i?"; path="+i:"")+(o?"; domain="+o:"")+(a?"; secure":"")},e.get_cookie=function(e){var t=" "+document.cookie,n=" "+e+"=",i=null,o=0,a=0;return t.length>0&&-1!=(o=t.indexOf(n))&&(o+=n.length,-1==(a=t.indexOf(";",o))&&(a=t.length),i=unescape(t.substring(o,a))),i},e.is_element_on_screen=function(e,t){t=void 0!==t?t:0;var n=$(e);if($(e).length){var i=$(window),o=i.scrollTop(),a=o+i.height(),r=n.offset().top,s=r+n.height()-t;return Math.min(s,a)>=Math.max(r,o)}},e.smooth_scroll=function(t,n,i,o,a){var r=$(window).scrollTop();if(i<0)o&&o();else{var s,c=(!isNaN(parseFloat(n))&&isFinite(n)?n:n.offset().top+(a||0))-r;s=0===i?c:c/i*10,this.scrollToTimerCache=setTimeout(function(){isNaN(parseInt(s,10))||(window.scrollTo(0,r+s),e.smooth_scroll(t,n,i-10,!!o&&o(),a))}.bind(this),10)}},e.strip=function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""},e.debounce=function(e,t,n){var i;return function(){var o=this,a=arguments,r=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||e.apply(o,a)},t),r&&e.apply(o,a)}},e.getAbsoluteHeight=function(e){e="string"==typeof e?document.querySelector(e):e;var t=window.getComputedStyle(e),n=parseFloat(t.marginTop)+parseFloat(t.marginBottom);return Math.ceil(e.offsetHeight+n)}}function Common(){var e=this;e.func=new Func,e.month_names=["January","February","March","April","May","June","July","August","September","October","November","December"],e.logged=$("html").is(".logged"),e.get_cdn_url=function(){return window.trConfig&&window.trConfig.cdn?trConfig.cdn:(e.cdn_url||(e.cdn_url=location.host+"/",e.cdn_url.indexOf(".com")>=0&&(e.cdn_url.indexOf("www.")>=0?e.cdn_url=e.cdn_url.replace("www.","cdn."):e.cdn_url="cdn."+e.cdn_url),e.cdn_url="//"+e.cdn_url),e.cdn_url)},e.get_cdn_version=function(){if(window.trVersion)return window.trVersion;if(void 0===e.cdn_version)for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n++){var i;if(/script\.v[0-9]+\.(min|orig)\.js/.test(t[n].src))if((i=t[n].src.split("/")).length>0)(i=i[i.length-1].split("."))[1]&&(e.cdn_version=i[1].substr(1))}return e.cdn_version},e.init_lazyload=function(){setTimeout(function(){$("img.lazy, .img.lazy").unveil(window.screen.height||500)},10)},e.isObjectFitSupported=function(){return"objectFit"in document.documentElement.style},e.init_bg_all=function(){var t=$(".bg-all img, .js-bg-all img:not(.no-object-fit)");!e.isObjectFitSupported()&&t.length>0&&t.each(function(e){var t=$(this).attr("src"),n=$(this).data("src");$(this).parent().toggleClass("img lazy",!!$(this).hasClass("lazy")).css("background-image",'url("'+t+'")').data("src",n),$(this).remove()})},e.load_css=function(t,n){var i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=t.indexOf("pw")<0?t:t.replace(".css",".v"+e.get_cdn_version()+".css"),n&&(i.onload=function(){n()}),$("html").append(i)},e.load_js=function(t,n,i){var o=document.createElement("script");o.async="async",o.src=i||t.indexOf("pw")<0?t:t.replace(".min.js",".v"+e.get_cdn_version()+".min.js"),t.indexOf(".tourradar.com")>=0&&(o.crossOrigin="anonymous"),document.body.appendChild(o),o.onload=function(){n&&n()}},e.show_request_error=function(e,t){console.log("------------------------------"),console.log("ERROR: "+e),console.log("STATUS: "+t.status),200==t.status&&console.log("MESSAGE: "+t.responseText)},e.send_request=function(t,n,i,o,a){if(void 0===o)o={};console.log("SEND "+(o.type?o.type:"POST")+": "+t),$.ajax({url:t,data:n,dataType:o.dataType?o.dataType:"json",type:o.type?o.type:"POST",success:function(e){i&&i(e)},error:function(n){e.show_request_error(t,n),a&&a()}})},e.send_google_event=function(t,n,i,o){if("undefined"!=typeof dataLayer){var a={event:"gaEvent",eventCategory:t,eventAction:n,eventLabel:i||"",nonInteraction:!1};if(o)for(var r in o)"value"==r?a.eventValue=o[r]:a[r]=o[r];console.log("EVENT: "+[a.eventCategory,a.eventAction,a.eventLabel,a.eventValue].join("; ")+("nonInteraction"in a?"; nonInteraction:"+a.nonInteraction:"")),dataLayer.push(a)}e.sendTrackerEvent(t,n,i,o)},e.sendTrackerEvent=function(e,t,n,i){"undefined"!=typeof tracker&&tracker&&tracker("addEvent",e,t,n,i)},e.lib={set_loaded:function(t){t instanceof Array&&t.forEach(function(t){e.lib.use[t].initiated=!0})},use:{popup:{initiated:!1,version:"1-0-2",css:"include/js/magnific-popup/magnific-popup",js:"include/js/magnific-popup/magnific-popup"},slider:{initiated:!1,version:"8-1-1",css:"include/js/nouislider/nouislider",js:"include/js/nouislider/nouislider"},calendar:{initiated:!1,version:"1-4-2",css:"include/js/pikaday/scss/pikaday",js:"include/js/pikaday/pikaday"},selector:{initiated:!1,version:"2-0-1",css:"include/js/selectivity/selectivity-full",js:"include/js/selectivity/selectivity-full"},animation:{initiated:!1,version:"1-0-0",css:!1,js:"include/js/zepto-anim"},mobile:{initiated:!1,version:"1-0-2",css:!1,js:"include/js/zepto-mobile"},touch:{initiated:!1,version:"1-0-2",css:!1,js:"include/js/zepto-touch"},tooltip:{initiated:!1,version:"1-1-2",css:"include/js/ttip/ttip",js:"include/js/ttip/ttip"},dragdrop:{initiated:!1,version:"1-0-0",css:!1,js:"include/js/zepto.dragswap"},autocomplete:{initiated:!1,version:"1-0-5",css:"include/js/tiny-autocomplete/tiny-autocomplete",js:"include/js/tiny-autocomplete/tiny-autocomplete"},dynamicmap:{initiated:!1,version:"1-0-0",css:"include/pw/dynamicmap/leaflet",js:"include/pw/dynamicmap/script"}},init:function(t,n,i){var o=window.trVersion||Math.random();e.lib.use[t].initiated?(i&&setTimeout(function(){i()},300),n&&setTimeout(function(){e.lib.callbackFunctions(t,n)},300)):(e.lib.use[t].initiated=!0,e.lib.use[t].css&&e.load_css(e.get_cdn_url()+e.lib.use[t].css+".v"+e.lib.use[t].version+".min.css?v="+o,function(){i&&i()}),e.load_js(e.get_cdn_url()+e.lib.use[t].js+".v"+e.lib.use[t].version+".min.js?v="+o,function(){n&&e.lib.callbackFunctions(t,n)},!0))},callbackFunctions:function(e,t){if("autocomplete"==e)var n=setInterval(function(){"function"==typeof $.tinyAutocomplete&&(clearInterval(n),t())},10);else if("popup"==e)var i=setInterval(function(){"object"==typeof $.magnificPopup&&(clearInterval(i),t())},10);else t()}},e.signup={initiated:!1,version:"2015-12-29-005",show:function(t,n,i){e.signup.initiated?$("."+t+"_link").click():(e.signup.initiated=!0,e.send_request("/pw_common/component/signup",{},function(o){$("main").append(o.component),e.load_js(e.get_cdn_url()+"include/pw/_common/signup.min.js?v="+e.signup.version,function(){e.lib.init("popup",function(){$(".signup_link, .login_link").magnificPopup({closeOnBgClick:!0}),$(".email_add_popup_link").magnificPopup({closeOnBgClick:!1,closeOnContentClick:!1,showCloseBtn:!1,enableEscapeKey:!1}),$("."+t+"_link").click(),_signup=new Signup,_signup.initiate(n,i)})})}))}},e.byUserInteraction=function(t,n){void 0===e.interactions&&(e.interactions={}),e.interactions[t]||(e.interactions[t]={},n&&(e.interactions[t].callback=n))},e.initUserInteraction=function(){void 0===e.interactions&&(e.interactions={}),e.byWindowAction(["scroll","keydown","keyup","mousemove","touchend","touchmove"],function(){$.each(e.interactions,function(t,n){"function"!=typeof n.callback||e.interactions[t].initiated||(e.interactions[t].initiated=!0,n.callback())})})},e.byWindowAction=function(t,n){void 0===e.windowActions&&(e.windowActions=[]),-1!=$.inArray("load",t)&&n();var i=t.indexOf("load");i>-1&&t.splice(i,1),e.windowActions.push({events:t,callback:n})},e.initWindowAction=function(){void 0===e.windowActions&&(e.windowActions=[]),$(window).on("scroll click keydown keyup mousemove touchend load resize lookup popstate",function(t){$.each(e.windowActions,function(e,n){$.inArray(t.type,n.events)<0||n.callback(t)})})},e.initParameters=function(){var t=document.getElementsByTagName("main")[0],n=t.getAttribute("data-parameters");t.removeAttribute("data-parameters"),e.parameters=n&&JSON.parse(n)||{}},e.removeQueryStringParam=function(e){var t=new RegExp("([?&])"+e+"=([^&;]+)?[&;]?");if(location.search.match(t)){var n=[location.protocol,"//",location.host,location.pathname].join(""),i=document.location.search,o="";i&&(o=(o=i.replace(t,"$1")).replace(/[&;]$/,"")),o="?"===o?"":o,window.history.replaceState({},"",n+o+location.hash)}},e.cleanURL=function(){e.removeQueryStringParam("ehash"),e.removeQueryStringParam("email")},e.lsIsAvailable=function(){if(void 0!==e.lsStatus)return e.lsStatus;var t="testLocalStorage";try{localStorage.setItem(t,t),localStorage.removeItem(t),e.lsStatus=!0}catch(t){e.lsStatus=!1}return e.lsStatus},e.csrf={CSRF_INPUT_ID:"#js-ao-settings-security-input",CSRF_INPUT_OBJECT:null,init:function(){this.CSRF_INPUT_OBJECT=$(this.CSRF_INPUT_ID)},setHash:function(e){this.CSRF_INPUT_OBJECT.length&&this.CSRF_INPUT_OBJECT.val(e)},getTokenName:function(){return this.CSRF_INPUT_OBJECT.length?this.CSRF_INPUT_OBJECT.attr("name"):""},getHash:function(){return this.CSRF_INPUT_OBJECT.length?this.CSRF_INPUT_OBJECT.val():""}},e.pwa={promptDisplayed:!1,initiate:function(){e.pwa.serviceWorker(),window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone?e.send_google_event("PWA","App","Open"):e.pwa.events()},events:function(){window.addEventListener("beforeinstallprompt",function(t){t.preventDefault(),e.pwaPrompt=t}),window.addEventListener("appinstalled",function(t){e.send_google_event("PWA","App","Installed")})},prompt:function(){if(!e.pwa.promptDisplayed){var t=location.pathname;"/registration"!==t&&"/login"!==t&&(e.pwaPrompt.prompt(),e.send_google_event("PWA","Prompt","Show"),e.pwaPrompt.userChoice.then(function(t){"accepted"===t.outcome?e.send_google_event("PWA","Prompt","Accept"):e.send_google_event("PWA","Prompt","Dismissed"),e.pwaPrompt=null,e.pwa.promptDisplayed=!0}))}},serviceWorker:function(){"serviceWorker"in navigator&&window.addEventListener("load",function(){if(navigator.serviceWorker.controller)console.log("[PWA Builder] active service worker found, no need to register");else{var t=location.origin+"/include/pw/service_worker/script.min.js?v="+e.get_cdn_version();navigator.serviceWorker.register(t,{scope:"/"}).then(function(e){console.log("Service worker has been registered for scope: "+e.scope)}).catch(function(e){console.log("Service worker registration failed: "+e)})}})}}}function Header(){var e=this,t=common;e.menu={initiated:!1,g_search:!1,s_open:!1,no_s_blur:!1,act_drop:null,next_drop:null,act_drop_to:null,initiate:function(){$("head").append('<link rel="shortcut icon" href="'+t.get_cdn_url()+'favicon.ico">'),$('a[href="#"]').click(function(e){e.preventDefault()}),$("header input").blur(function(n){e.menu.no_s_blur||(e.menu.s_open=!1,$(".tagln-search").removeClass("mob-focus"),$("header .autocomplete-list").remove(),$(this).removeClass("focus").val(""),$("html, body").removeClass("search-focused"),t.send_google_event("Header Search","Close"))}),$("header .tagln-search").click(function(n){var i=$("header input");e.menu.no_s_blur=!1,e.menu.s_open&&($(n.target).is("header .close span")||$(n.target).is("header .close"))?(e.menu.s_open=!1,$(".tagln-search").removeClass("mob-focus"),$("header .autocomplete-list").remove(),i.removeClass("focus").val(""),$("html, body").removeClass("search-focused"),t.send_google_event("Header Search","Close")):e.menu.s_open||(e.menu.s_open=!0,i.focus(),t.send_google_event("Header Search","Open"))}),$(":root").on("mousedown",".tagln-search",function(){e.menu.no_s_blur=!0}),$("header input").focus(function(){$(".tagln-search").addClass("mob-focus"),$(this).val()||$(this).data("serp",""),$(this).addClass("focus"),$("html, body").addClass("search-focused")});var n;$("header li.dropdown").mouseenter(function(){var t=$(this);n=setTimeout(function(){e.menu.open_dropdown(t)},100)}),$("header li.dropdown").mouseleave(function(){clearTimeout(n);var t=$(this);t.hasClass("hover")?e.menu.act_drop_to=setTimeout(function(){e.menu.act_drop=null,t.removeClass("hover"),e.menu.next_drop&&e.menu.open_dropdown(e.menu.next_drop)},175):e.menu.next_drop&&e.menu.next_drop[0]==t[0]&&(e.menu.next_drop=null)}),t.byUserInteraction("menu-load",function(){try{if(!e.menu.initiated){if(t.lsIsAvailable()){var n=localStorage.menu_exp;if(void 0!==localStorage.menu_exp&&n>Date.now()){e.menu.initiated=!0;var i=localStorage.mobile_menu,o={destinations:localStorage.destinations,styles:localStorage.styles};t.send_request("/pw_common/component/cache_time",{},function(t){1e3*t.component>n-6048e5?e.menu.get_menu():e.menu.load(o,i)})}}e.menu.initiated||(e.menu.initiated=!0,e.menu.get_menu())}}catch(e){}}),$("header .t-menu").click(function(){setTimeout(function(){$("nav.header").addClass("open"),$(".darken").removeClass("hid"),$("body").addClass("lock")},25)}),$(".darken").click(function(){$(".darken").addClass("hid"),$("body").removeClass("lock"),$("nav.header, nav.header ul.open").removeClass("open"),$("nav.header .return").addClass("hid"),$("nav.header ul").removeAttr("style")}),$(".support .open-olark").click(function(){footer.olarkIntegration.startEnquiryDialog(),t.send_google_event("Header","Click","Live Chat")})},open_dropdown:function(n){if(e.menu.act_drop){if(e.menu.act_drop[0]!=n[0])return void(e.menu.next_drop=n);clearTimeout(e.menu.act_drop_to)}else e.menu.act_drop=n,e.menu.next_drop=null,n.addClass("hover");var i=n.data("type");if(i)var o=i;else if(n.hasClass("profile"))o="profile";else o="help";t.send_google_event("Header","Open",o)},get_menu:function(){t.send_request("/pw_common/component/header_menu,header_mobile_menu",{},function(n){var i=n.components.header_menu,o=n.components.header_mobile_menu;if(e.menu.load(i,o),$("li.dropdown.fill nav").removeClass("hid"),t.lsIsAvailable())try{var a=Date.now()+6048e5;localStorage.mobile_menu=o,localStorage.destinations=i.destinations,localStorage.styles=i.styles,localStorage.menu_exp=a}catch(e){}})},load:function(n,i){$("nav.header .pr-end").after(i),$('header li[data-type="destinations"] nav').html(n.destinations),$('header li[data-type="styles"] nav').html(n.styles),$("li.dropdown.fill nav").removeClass("hid"),$("nav.header li").click(function(){$(this).children("ul").addClass("open"),$(this).children("div.return").removeClass("hid"),$(this).parent("ul").css("overflow","visible")}),$("nav.header .return").click(function(e){$(this).parent("li").parent("ul").removeAttr("style"),$(this).addClass("hid"),$(this).next("ul").removeClass("open"),e.stopPropagation()}),$("nav.header ul").scroll(function(){var e=$(this).scrollTop(),t=Math.floor(e/43);$(this).children("li").each(function(n){if(n<t)$(this).css({opacity:0});else if(n==t){var i=(43-e%43)/43;$(this).css({opacity:i})}else $(this).css({opacity:1})})}),$("header .return").mousedown(function(){var t=$(this).parents("nav");setTimeout(function(){e.menu.swap(t.children("ul.all"),t.children("ul.top"),"t",null)},200)}),$("header ul li.dropdown.fill").mouseleave(function(){$(this).find("ul.all").addClass("hid"),$(this).find("ul.top").removeClass("hid")}),$("header .see-all a").click(function(n){n.preventDefault();var i=$(this).parents("li[data-type]").data("type");$(this).parents("nav").find("ul.all > li:not(.return)").hide(),$(this).parents("nav").find('ul.all > li[data-type="'+i+'"]').show(),e.menu.swap($(this).parents("nav ul.top"),$(this).parents("nav").children("ul.all"),"b",$(this).parents(".top li").find("span").text()),t.send_google_event("Header","Click","See all "+i)})},swap:function(e,t,n,i){t.hasClass("hid")&&t.removeClass("hid");var o="t"==n;o||t.css("opacity","0");var a=Date.now()+300,r=Date.now()+800;if(!o){t.parents("nav").find(".all .return span").text(i);var s=Date.now()+1500,c=setInterval(function(){if(Date.now()<s){var e=(s-Date.now())/1500;t.parents("nav").find(".all .arrow").css("opacity",1-e),t.parents("nav").find(".all .return span").css("opacity",e)}},50);setTimeout(function(){clearInterval(c);var e=t.parents("nav").find(".return span");t.parents("nav").find(".all .arrow").css("opacity","1"),e.css("opacity","0"),e.text("")},1500)}var l=setInterval(function(){if(Date.now()<a){var n=(a-Date.now())/300,i=o?100*n:100*(1-n);t.css("top","-"+i+"%"),e.css("top","-"+i+"%")}},25),u=setInterval(function(){if(Date.now()<r){var n=(r-Date.now())/800;o||t.css("opacity",1-n),o&&e.css("opacity",n)}},40);setTimeout(function(){clearInterval(l),e.addClass("hid"),e.css("opacity","1"),e.css("top","0"),t.css("top","0")},300),setTimeout(function(){clearInterval(u),t.css("opacity","1")},800)}},e.search={initiated:!1,g_search:!1,clicked:!1,maxResults:5,initiate:function(){$("header input").one("focus click keydown input",function(){e.search.initiated||(e.search.initiated=!0,t.lib.init("autocomplete",function(){$("header input").tinyAutocomplete({url:"https://3VPAXN8SSR-dsn.algolia.net/1/indexes/*/queries",method:"post",keyboardDelay:0,getRequestData:function(t){var n=$.param({query:t,attributesToRetrieve:"name,type_name,operator_name,url",attributesToHighlight:"",hitsPerPage:e.search.maxResults});return JSON.stringify({requests:[{indexName:window.trConfig.algolia.indexes.serp,params:n},{indexName:window.trConfig.algolia.indexes.operators,params:n},{indexName:window.trConfig.algolia.indexes.tours,params:n}],strategy:"stopIfEnoughMatches"})},ajaxSettings:{type:"post",contentType:"application/json",dataType:"json",beforeSend:function(e){e.setRequestHeader("X-Algolia-API-Key",window.trConfig.algolia.api_key),e.setRequestHeader("X-Algolia-Application-Id",window.trConfig.algolia.app_id)}},wrapField:!1,itemTemplate:'<li class="autocomplete-item" data-url="{{url}}" data-type="{{eventType}}">{{title}}<span>{{type}}</span></li>',lastItemTemplate:'<li class="autocomplete-item" data-url="" data-type="">See all results for "{{title}}"</li>',onSelect:function(n){var i=$(n).data("url"),o=$(n).data("type");if($(n).hasClass("autocomplete-item"))if(i=t.func.strip(i),o=t.func.strip(o),i){var a=$(n).html().replace(/<span>(.*)<\/span>/g,"").replace("amp;","");a=t.func.strip(a),t.send_google_event("Header Search","Select "+t.func.ucfirst(o.toLowerCase()),a),window.location.href="/"+i}else e.search.search_in_google()}}).on("receivedata",function(e,t,n){for(var i=[],o=0;o<n.results.length;o++)for(var a=n.results[o].hits,r=0;r<a.length;r++){var s="MIX",c="MIX";a[r].type_name?s=c=a[r].type_name:"operators_production"==n.results[o].index?s=c="Operator":"tours_production"==n.results[o].index&&(s=a[r].operator_name,c="Tour"),i.push({title:a[r].name,url:a[r].url,type:s,eventType:c})}t.json=i,t.selectedItem=0}).on("keydown",function(t){var n=t.keyCode?t.keyCode:t.which,i=$("header .autocomplete-list").last(),o=i.find(".autocomplete-item.active").index();13==n?i&&"none"!==i.css("display")&&i.find("li").length>0?-1==o&&i.find(".autocomplete-item:first-child").click():e.search.search_in_google():27==n&&($("header input").val("").removeClass("focus"),$("html, body").removeClass("search-focused"))})}))})},search_in_google:function(){e.search.g_search?e.search.g_query():(e.search.g_search=!0,$("header").append('<div id="results"></div>'),window.__gcse={parsetags:"explicit",callback:function(){e.search.g_query()}},function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https:":"http:")+"//cse.google.com/cse.js?cx=003707296529978746672:vbrxfelmaog";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}())},g_query:function(){if("complete"!=document.readyState)return google.setOnLoadCallback(e.search.g_query(),!0);google.search.cse.element.render({gname:"gsearch",div:"results",tag:"searchresults-only",attributes:{linkTarget:""}});var n=google.search.cse.element.getElement("gsearch"),i=$("header input").val();i+=" tourradar",n.execute(i),t.send_google_event("Header Search","Custom Search",i),document.activeElement.blur()}},e.top_banner={initiated:!1,initiate:function(){$(".t_b").length>0&&e.top_banner.show_banner()},show_banner:function(){e.top_banner.initiated||(e.top_banner.initiated=!0,t.send_request("/pw_common/component/top_banner",{},function(e){$("body").trigger("banner:init"),$(".t_b").addClass("done").html(e.component);var t=$("body").data("b");$("main .top .sch").length&&"you_reffered_not_logged"==t&&$("#row-banner.for_referred").length>0&&($("main .top").append('<div class="yrnl"><div><span>'+$("#row-banner").data("in")+'</span><br>sent you a 5% discount</div><span class="li">Redeem discount</span></div>'),$("#row-banner .inv_image").clone().prependTo("main .top .yrnl"),$("main .top .yrnl").click(function(){location.href=$("#row-banner a").attr("href")}))}))}},e.newsletter_top_banner={initiated:!1,max_window_width:963,initiate:function(){e.newsletter_top_banner.all_checks()&&e.newsletter_top_banner.show(),$(window).bind("resize",function(){e.newsletter_top_banner.all_checks()?e.newsletter_top_banner.show():e.newsletter_top_banner.check()})},all_checks:function(){return!$("body").data("r")&&!$(".r2 ul li.tr").hasClass("logged")&&!t.func.get_cookie("tnbcls")&&0==$("#row-banner").length&&!$("body").hasClass("tab")&&$(window).width()>=e.newsletter_top_banner.max_window_width},show:function(){e.newsletter_top_banner.initiated?e.newsletter_top_banner.check():(e.newsletter_top_banner.initiated=!0,t.send_request("/welcome/newsletter_signups",{},function(n){if("OK"==n.status){$("body").prepend(n.html);var i="#tnb .tnb1 .in",o=$(i+" input").attr("placeholder");$(i+" div").click(function(){var e=$.trim($(i+" input").val());if(!e||!t.func.check_string(e,"email"))return $(i+" input").addClass("red").attr("placeholder","Please, enter a valid email").val("").focus(function(){$(this).removeClass("red").attr("placeholder",o).val(e)}),!1;t.send_request("/welcome/newsletter_check",{email:e},function(e){"OK"==e.status&&($(i).html("<b>Thanks! You will receive an email soon</b>"),t.func.set_cookie("tnbcls","1",31536e3,"/"))})}),$(i+" input").live("keyup",function(e){13==(e.keyCode?e.keyCode:e.which)&&$(i+" div").click()}),$("#tnb .tnb1 .cls").click(function(){$("#tnb").remove(),t.func.set_cookie("tnbcls","1",31536e3,"/"),e.newsletter_top_banner.check()}),e.newsletter_top_banner.check()}}))},check:function(){e.newsletter_top_banner.initiated&&($(".b.val.fixed").length>0?$(".b.val.fixed").addClass("wtop"):$(".b.val.fixed").removeClass("wtop"),$(".b.menu ul.fixed").length>0?$(".b.menu ul.fixed").addClass("wtop"):$(".b.menu ul.fixed").removeClass("wtop"),$("#tnb").length||$(".b.val.fixed, .b.menu ul.fixed").removeClass("wtop"))}}}function Footer(){var e=this,t=common;e.links={initiate:function(){$("footer .rlk h4").click(function(){var e=$(this).parent("div");e.hasClass("open")?(e.removeClass("open"),$(this).find(".arrow").addClass("bottom")):($("footer .rlk div").removeClass("open"),$("footer .rlk div .arrow").addClass("bottom"),e.find(".arrow").removeClass("bottom"),e.addClass("open"))})}},e.subscribe={initiate:function(){$("footer form").submit(function(){var n=$.trim($(this).children("input").val());return n&&t.func.check_string(n,"email")?(t.send_google_event("Newsletter - Signup","SignedUp","Footer"),t.send_request("/welcome/newsletter_check",{email:n},function(t){"OK"==t.status&&e.subscribe.success()}),!1):(alert("Please enter valid email address."),!1)}),$("footer form a").click(function(){return $("footer form").submit(),!1})},success:function(){$("footer form").find("input, a, p").toggleClass("hid"),$("footer form .title").addClass("submit")}},e.social={initiated:!1,initiate:function(){$(".js-ao-expo-awareness-footer__share-fb").length>0?e.social.initiated||(e.social.initiated=!0,t.send_request("/pw_common/component/footer_facebook",{},function(t){e.social.show_facebook(t.component)})):$("footer .soc").length>0&&t.byWindowAction(["scroll"],function(){$(window).scrollTop()+$(window).height()>=$("footer .soc").offset().top&&(e.social.initiated||(e.social.initiated=!0,t.send_request("/pw_common/component/footer_social,footer_facebook",{},function(t){e.social.show_links(t.components.footer_social),e.social.show_facebook(t.components.footer_facebook)})))})},show_links:function(e){$("footer .soc").prepend(e)},show_facebook:function(e){$("footer .fb, .js-ao-expo-awareness-footer__share-fb").prepend(e)}},e.olarkIntegration={askSubmit:function(n,i){var o=0|$.trim(n.find('input[name="tour_id"]').val()),a=0|$.trim(n.data("price")),r=$.trim(n.find("textarea").val())||"",s=n.find('input[name="email"]').length>0?$.trim(n.find('input[name="email"]').val()):null,c=n.find('input[name="phone"]'),l=n.find('input[name="name"]').val(),u=0|n.find('input[name="live_chat"]').val(),d=$.trim(c.val()),p=n.find('select[name="currency"]'),f=n.find('select[name="source"]'),h=n.find('select[name="date"]'),m=n.find('input[name="stateroom"]'),v=n.find('input[name="stateroom"]:checked'),g=n.find('select[name="room"]'),_=n.find('select[name="transport"]'),b=n.find('input[name="pax"]'),y=n.find('input[name="in-the-past"]'),k=$("#ask_popup button"),w=n.data("currency")||"EUR",C=!1,x=n.parents("#ask_popup").hasClass("river-cruise");if(r||x?!l&&x?C="Please enter your Full Name.":!(n.find('input[name="email"]').length>0)||s&&t.func.check_string(s,"email")?d.length<5&&x?C="Please enter your phone.":h.length>0&&10!=h.val().length&&x?C="Please Select Date.":m.length>0&&0==v.length&&x&&m.parent().hasClass("active")?C="Please Select Stateroom.":g.length>0&&0==g.val()&&x&&g.parent().hasClass("active")&&(C="Please Select Stateroom."):C="Please enter valid email address.":C="Please enter your question.",_.length>0&&!_.hasClass("hid")&&(r=r+"\n\nI would like an offer for this room: "+_.val()),m.length>0&&v.length>0&&m.parent().hasClass("active")&&(r=(r?r+"\n\n":"")+"Stateroom: "+v.val()),y.length&&y.filter(":checked").length&&(r=(r?r+"\n\n":"")+y.parent().find("label").text().trim()),C)alert(C);else{"undefined"!=typeof tracker&&tracker("addEvent","tracker","email",s,{});var S={type:"t",id:o,enquiry_source:"",email:s,details_phone:d,first_name:l,source:"tr",source_id:0,pax:b.length&&b.val()?b.val():1,name:l,details_type:4,comment:r,note:i.note||"",date:i.date||null};if(x&&g.parent().hasClass("active")&&(S.room=g.val()),p.length>0&&(S.currency=p.val(),h.length>0&&10==h.val().length&&(S.date=h.val()),"0"!=f.val()&&(S.create_source=f.val())),e.olark.isAvailable()&&u&&!i.forceEnqiry){window.olark&&olark("api.box.expand");var T=$("#olark-wrapper");T.find("#olark-form-input-fname").val(l).trigger("input"),T.find("#olark-form-input-email").val(s).trigger("input"),d&&T.find("#olark-form-input-phone").val(d).trigger("input"),T.find(".olark-form-send-button").click(),T.find(".olark-feedback-cancel-button").click(),setTimeout(function(){T.find(".olark-chat-input").val(r),T.find(".olark-chat-send-button").click()},1e3),$.magnificPopup.close();var I={tourID:o,tourPrice:10,pax:1,currencyCode:"USD"};t.send_google_event("Ask A Question","Question Asked - Live Chat",i.name,I)}else x&&(S.booktype="river",S.date||(S.date=h.val())),k.attr("disabled",!0),t.send_request(n.attr("action"),S,function(e){if(k.attr("disabled",!1),"OK"!=e.status)return!1;var n={tourID:o,tourPrice:a,pax:1,currencyCode:w};t.send_google_event("Ask A Question","Question Asked"+(i.note?" - General":""),i.name,n),$("#ask_popup_success .but.blue").attr("href",e.href),$.magnificPopup.close(),e.has_nps_record&&$("#ask_popup_success .js-ao-common-nps").remove();var r=$(".ask_link_success");r.magnificPopup({closeOnBgClick:!0,closeMarkup:'<div title="Close (Esc)" class="close mfp-close"></div>',callbacks:{open:function(){(new AOCommonNps).initiate(s,"ask_question")},close:function(){$(".ask_link_success, #ask_popup_success").remove()}}}),r.magnificPopup("open"),$("#ask_popup_success .but:not(.blue)").click(function(){r.magnificPopup("close")});var c=$("#ask_popup_success .oh-blk");if(c.length>0){var l=new OpeningHours(t);l.initiate(c),l.initiateTracking("",i.name)}"function"==typeof onEnquiryCreatedGlobal&&onEnquiryCreatedGlobal()})}},defaultTour:{id:-1,name:location.href,note:"User comes from "+location.href},paxFunctions:{initPax:function(t){var n=t.find(".quantity");e.olarkIntegration.paxFunctions.paxNumber=n.find("input").val(),e.olarkIntegration.paxFunctions.paxMax=n.find("input").attr("max"),n.find(".number").click(function(){$(this).hasClass("grey")||$(this).hasClass("disabled")||($(this).hasClass("plus")?e.olarkIntegration.paxFunctions.addPax(n):e.olarkIntegration.paxFunctions.removePax(n))}),n.find("input").on("blur keyup",function(t){if("blur"==t.type||"Enter"==t.code){var i=parseInt($.trim(n.find("input").val()));e.olarkIntegration.paxFunctions.adjustTravellersNumberTo(i,n)}})},adjustTravellersNumberTo:function(t,n){t>e.olarkIntegration.paxFunctions.paxMax?(e.olarkIntegration.paxFunctions.paxNumber=e.olarkIntegration.paxFunctions.paxMax,e.olarkIntegration.paxFunctions.adjustIcons(n)):t<1?(e.olarkIntegration.paxFunctions.paxNumber=1,e.olarkIntegration.paxFunctions.adjustIcons(n)):(e.olarkIntegration.paxFunctions.paxNumber=t,e.olarkIntegration.paxFunctions.adjustIcons(n))},addPax:function(t){var n=t.find(".number").filter(".plus");n.addClass("disabled"),e.olarkIntegration.paxFunctions.paxNumber++,n.removeClass("disabled"),e.olarkIntegration.paxFunctions.adjustIcons(t)},removePax:function(t){if(!(e.olarkIntegration.paxFunctions.paxNumber<=1)){var n=t.find(".number").filter(".minus");n.addClass("disabled"),e.olarkIntegration.paxFunctions.paxNumber--,n.removeClass("disabled"),e.olarkIntegration.paxFunctions.adjustIcons(t)}},adjustIcons:function(t){t.find("input").val(e.olarkIntegration.paxFunctions.paxNumber),t.find(".number").removeClass("grey"),1==e.olarkIntegration.paxFunctions.paxNumber&&t.find(".number").filter(".minus").addClass("grey"),e.olarkIntegration.paxFunctions.paxNumber==e.olarkIntegration.paxFunctions.paxMax&&t.find(".number").filter(".plus").addClass("grey")}},startEnquiryDialog:function(n,i,o){var a=this;n||(n=this.defaultTour),this._initialized?$(".ask_link").magnificPopup("open"):(data={id:n.id},n.type&&(data.type=n.type),t.send_request("/pw_tour/ask_question_popup",data,function(r){if($("body").append(r.component),window.olark&&olark("api.box.shrink"),i&&$("footer .olark").html(i),o){if("contact"===o)var s="",c="Contact Page";else c="tdp"===common.parameters.page_type?$("main h1").html():"Other",s=" - Float button";t.send_google_event("Ask A Question","Ask a question open"+s,c)}var l=$("#ask_popup form");(l.submit(function(e){e.preventDefault(),a.askSubmit($(this),n)}),l.parents("#ask_popup").hasClass("river-cruise"))&&(l.find('select[name="date"]').change(function(e){e.preventDefault();var i=l.find(".stateroom");if(i.find("img").remove(),i.find(".rooms").removeClass("active"),i.find(".rooms.select option").not('[value="0"]').remove(),"0"!=$(this).val()){var o=$(this).val();i.append('<img class="l" src="/im/r/pw/tr-loader-small.gif">'),t.send_request("/pw_tour/get_accomodations",{id:n.id,date:o},function(e){"OK"==e.status&&e.accomodations.length>0?($.each(e.accomodations,function(e,t){var n=t.price<0?"-":"+";i.find(".rooms.select select").append('<option value="'+t.addon_name+'">'+t.addon_name+" ("+n+l.data("currency-symbol")+Math.abs(t.price)+")</option>")}),i.find(".rooms.select").addClass("active")):i.find(".rooms.labels").addClass("active"),i.find("img").remove()})}}),e.olarkIntegration.paxFunctions.initPax(l));window.tracker&&tracker("appendParameters",r.parameters||[]);var u=$("#ask_popup .expect"),d=$("#ask_popup .but.blue");u.data("expect",u.text());var p=!0;t.parameters.useIOSPopupFix&&(p=!1),t.lib.init("popup",function(){var t=$(".ask_link"),i=null;t.magnificPopup({closeOnBgClick:!0,closeMarkup:'<div title="Close (Esc)" class="close mfp-close"></div>',mainClass:"ask-popup",fixedContentPos:p,callbacks:{open:function(){n.forceEnqiry||(i=setInterval(function(){0|$('input[name="live_chat"]').val()&&e.olark.isAvailable()?u.text("Immediate response"):u.text(u.data("expect")),"Submit"!=d.text()&&"Submit Question"!=d.text()&&d.text("Submit Question")},500))},close:function(){clearInterval(i),$(".ask_link, #ask_popup").remove()}}}),t.magnificPopup("open")})}))}},e.olark={visitorInfo:new Array,initiate:function(){if(this.shouldBeEnabled()){$("footer").append('<a class="olark hid olark-tr-placeholder" data-reactid=".0.2"><svg x="0px" y="0px" viewBox="0 0 27 21.9" data-reactid=".0.2.0"><path fill="#fff" d="M23.2,0L2.6,1.7C1,1.9,0,3.2,0,4.9v8c0,1.6,0.8,3,2.4,3.1l5.3,0.5c0,0,1,1.6,0.3,3.2C7.2,21.3,6,21.9,6,21.9 c4.2,0,6.6-3.1,7.8-4.9l9.4,0.7c1.8,0.2,3.8-1.3,3.8-3.1V3.1C27,1.3,25-0.1,23.2,0z M6.4,10.1c-0.9,0-1.7-0.7-1.7-1.7 c0-0.9,0.7-1.7,1.7-1.7C7.3,6.8,8,7.5,8,8.5C8,9.4,7.3,10.1,6.4,10.1z M13.2,10.1c-0.9,0-1.7-0.7-1.7-1.7c0-0.9,0.7-1.7,1.7-1.7 c0.9,0,1.7,0.7,1.7,1.7C14.8,9.4,14.1,10.1,13.2,10.1z M19.9,10.1c-0.9,0-1.7-0.7-1.7-1.7c0-0.9,0.7-1.7,1.7-1.7 c0.9,0,1.7,0.7,1.7,1.7C21.6,9.4,20.9,10.1,19.9,10.1z" data-reactid=".0.2.0.0"></path></svg><p class="olark-button-text" data-reactid=".0.2.2">Need help?</p></a>')}},show:function(){t.func.get_cookie("olark_active")?($("footer .olark").remove(),e.olark.load()):$("footer .olark").removeClass("hid").click(function(){$(this).html("Please waitâ€¦"),e.olark.expand()})},shouldBeEnabled:function(){return!(!location.pathname||"/t/"!=location.pathname.substr(0,3))||!(!t.lsIsAvailable()||null===localStorage.getItem("olark.isAvailable"))},_isAvailable:!1,isAvailable:function(){return"undefined"!=typeof forceOlarkStatus?!!forceOlarkStatus:this._isAvailable},isExpand:!1,isLoaded:!1,isReady:!1,load:function(){if(this.shouldBeEnabled()){var n,i,o,a,r,s,c=this;t.lsIsAvailable()&&null!==localStorage.getItem("olark.isAvailable")&&(this._isAvailable=!!localStorage.getItem("olark.isAvailable")),window.olark||(n=window,i=document,o="static.olark.com/jsclient/loader.js",n.olark||(a="script",s=i.createElement(a),a=i.getElementsByTagName(a)[0],s.async=1,s.src="//"+o,a.parentNode.insertBefore(s,a),(s=n.olark=function(){r.s.push(arguments),r.t.push(+new Date)}).extend=function(e,t){s("extend",e,t)},s.identify=function(e){s("identify",r.i=e)},s.configure=function(e,t){s("configure",e,t),r.c[e]=t},r=s._={s:[],t:[+new Date],c:{},l:o})),olark.identify("7577-172-10-6850"),olark("api.chat.onBeginConversation",function(){t.send_google_event("Olark_Chat","Olark Begin Conversation",location.href)});var l=setInterval(function(){"function"==typeof olark&&(clearInterval(l),olark("api.chat.onReady",function(){c.isReady=!0,$("footer .olark").remove(),$(document).trigger("olark:loaded",[!0])}),olark("api.chat.onOperatorsAvailable",function(){t.lsIsAvailable()&&localStorage.setItem("olark.isAvailable",!0),c._isAvailable=!0,t.send_google_event("Olark_Chat","Operators are available",location.href,{nonInteraction:!0})}),olark("api.chat.onOperatorsAway",function(){t.lsIsAvailable()&&localStorage.setItem("olark.isAvailable",!1),c._isAvailable=!1,t.send_google_event("Olark_Chat","Operators are away",location.href,{nonInteraction:!0})}),olark("api.box.onExpand",function(){c.isExpand=!0,c.isAvailable()||(setTimeout(function(){window.olark&&olark("api.box.shrink")},1),e.olarkIntegration.startEnquiryDialog())}),olark("api.chat.onOfflineMessageToOperator",function(){t.send_google_event("Olark_Chat","Offline message sent",location.href,{nonInteraction:!0})}),olark("api.chat.onMessageToOperator",function(e){var t=!1;olark("api.visitor.getDetails",function(e){e.pageCountForThisVisit>=3||t||"undefined"!=typeof tracker&&(t=!0,tracker("addEvent","tracker","email",e.emailAddress,{}))})}),olark("api.box.onShrink",function(){c.isExpand=!1}),olark("api.chat.onBeginConversation",function(){var t=Date.now()+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);olark("api.visitor.updateCustomFields",{internalChatId:t}),olark("api.visitor.getDetails",function(n){var i=$.trim(n.emailAddress),o=$.trim(n.fullName);i&&$.ajax({url:"/travellers/olark_traveller_information",data:{email:n.emailAddress,tour_id:e.olarkIntegration.defaultTour.id,visitor_name:o,phone:n.phoneNumber,internal_chat_id:t},dataType:"json",type:"POST",success:function(t){if("OK"==t.status){window.tracker&&tracker("appendParameters",t.parameters||[]);var n=Array(),i=t.information;if(i.traveller&&"id"in i.traveller?e.olark.visitorInfo.push("Travel Credits: "+i.traveller.referral_balance):e.olark.visitorInfo.push("Travel Credits: Not a customer yet"),i.traveller&&"location"in i.traveller&&e.olark.visitorInfo.push("Customer Location: "+i.traveller.location),i.traveller&&"medical_conditions"in i.traveller&&e.olark.visitorInfo.push("Medical Condition: "+i.traveller.medical_conditions),i.traveller&&"age"in i.traveller&&e.olark.visitorInfo.push("Age: "+i.traveller.age),i.enquiries&&(e.olark.visitorInfo.push("# of Enquiries : "+i.enquiries.length),i.enquiries.length)){var o=["","Availability request","Brochure request","Ready to book","Have a question","Hold 48 hours"];n[n.length]="CUSTOMER HAS FOLLOWING ENQUIRIES / BOOKINGS:",$.each(i.enquiries,function(e,t){if(e<10){if("approval"==t.payment_provider_status)var i="Waiting for user approval";else if(3==parseInt(t.status)||"confirmed"==t.payment_provider_status)i="Confirmed booking";else if("declined_by_operator"==t.payment_provider_status||6==parseInt(t.status)||4==parseInt(t.status)||"payment_failed"==t.payment_provider_status||"declined_by_system"==t.payment_provider_status||"failed"==t.payment_provider_full_payment_status)i="Declined";else i="Initial enquiry";n[n.length]=t.id+" - "+t.added_formated+" - "+o[parseInt(t.type)]+" - "+i+" - "+t.pax+" pax - "+t.full_price+t.per_person_currency+" - "+t.tour_name+" - https://www.tourradar.com/admin/enquiries/go/"+t.id}})}if(i.pdf&&(e.olark.visitorInfo.push("# of Downloaded PDF : "+i.pdf.length),i.pdf.length&&(n[n.length]="CUSTOMER HAS THE FOLLOWING PDF DOWNLOADS:",$.each(i.pdf,function(e,t){e<10&&(n[n.length]=t.time_create+" - "+t.name+" - //www.tourradar.com/t/"+t.tour_id)}))),i.traveller&&"inviter"in i.traveller&&(n[n.length]="CUSTOMER DETAILS:",n[n.length]="Invited by : "+i.traveller.inviter.name+" - //www.tourradar.com/admin/travellers/edit/"+i.traveller.inviter.id),olark("api.chat.updateVisitorStatus",{snippet:e.olark.visitorInfo}),n.length){var a=0;$.each(n,function(e,t){setTimeout(function(){olark("api.chat.sendNotificationToOperator",{body:t})},a),a+=120})}}}})})}))},10)}},open:function(){$("footer .olark").length?$("footer .olark").click():(olark("api.box.expand"),t.func.set_cookie("olark_active","1",86400,"/"))},expand:function(){e.olark.load(),olark("api.box.expand"),t.func.set_cookie("olark_active","1",86400,"/"),t.send_google_event("Olark_Chat","Olark Widget Open",location.href)}},e.elems=function(){e.func=new Func,t.byWindowAction(["scroll","load"],function(){e.func.is_element_on_screen(".asta")&&($("body").hasClass("mob")?$(".asta div").addClass("a"):$(".asta").addClass("a"))})}}!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(){}return e.getStorage=function(){return window.sessionStorage||null},e.put=function(e,t){try{return!!this.getStorage()&&(this.getStorage().setItem(e,JSON.stringify(t)),!0)}catch(e){}return!1},e.get=function(e){try{if(!this.getStorage())return null;var t=this.getStorage().getItem(e);return null===t?t:JSON.parse(t)}catch(e){return null}},e}();t.SessionStorage=i},function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(){}return e.getCookiesList=function(){var e={};if(document.cookie&&""!=document.cookie)for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var i=t[n].split("=");i[0]=i[0].replace(/^ /,""),e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e},e.getCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t)){var a=o.substring(t.length,o.length);return void 0===a?null:a}}return null},e.setCookie=function(e,t,n){void 0===n&&(n=9999999);var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var o="expires="+i.toUTCString();return document.cookie=e+"="+t+";"+o+";path=/",!0},e}();t.Cookie=i},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();t.__esModule=!0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.getStorage=function(){return window.localStorage||null},t}(n(0).SessionStorage);t.LocalStorage=o},function(e,t,n){"use strict";t.__esModule=!0;var i=n(4),o=function(){var e=new i.Tracker,t=0;return setTimeout(function(){var n=function(){var n=Array.prototype.slice.call(arguments),i=n.shift();if("function"!=typeof e[i])return console.error("Tracking:: Unable to execute "+i+". This method not exists "),null;var o=e[i].apply(e,n);return t&&clearTimeout(t),t=setTimeout(function(){e.sendBeacon()},1e3),o},i=window;(i[i.CRMTracker].q||[]).forEach(function(e){n.apply(n,e)}),i[i.CRMTracker]=n},1),window.addEventListener("beforeunload",function(t){e.onUnload();var n=document.activeElement;n&&n.href&&-1!==n.href.indexOf(location.host)||e.sendBeacon()},!0),function(){}},a=document.readyState;"interactive"===a||"complete"===a?o():document.addEventListener("DOMContentLoaded",o)},function(e,t,n){"use strict";t.__esModule=!0;var i=n(1),o=n(0),a=n(5),r=n(6),s=n(7),c=n(2),l=function(){function e(e){void 0===e&&(e=null),this.eventQueue=[],this.forceData=!1,this.parameters=[],this.config=r.default,e&&this.setConfig(e),this.startTime=(new Date).getTime(),this.information=new a.Information(this.config)}return e.prototype.setConfig=function(e){return this.config=s(this.config,e),this.information.setConfig(this.config),!0},e.prototype.setPageValue=function(e){return this.information.setPageValue(e),this},e.prototype.setABTests=function(e){return this.information.setABTests(e),this},e.prototype.getTrackData=function(){var e=this.getTrackId();return{id:e,localId:this.config.localId,queue:this.getQueueList(!0),data:this.information.getData(!!e),parameters:this.parameters}},e.prototype.getTrackId=function(){var e=i.Cookie.getCookie(this.config.keys.cookieId);return e||((e=o.SessionStorage.get(this.config.keys.cookieId))?e:(e=c.LocalStorage.get(this.config.keys.cookieId))||null)},e.prototype.setTrackId=function(e){return i.Cookie.setCookie(this.config.keys.cookieId,e),o.SessionStorage.put(this.config.keys.cookieId,e),c.LocalStorage.put(this.config.keys.cookieId,e),this},e.prototype.setVisitId=function(e){return o.SessionStorage.put(this.config.keys.visitId,e),c.LocalStorage.put(this.config.keys.visitId,e),this.config.currentVisitId=e,this},e.prototype.getBeaconData=function(){var e={id:this.getTrackId(),localId:this.config.localId,queue:this.getQueueList(),parameters:this.parameters};return this.forceData&&(e.data=this.information.getData(!1)),e},e.prototype.processResult=function(e){var t=this;if(e&&e.success)return this.setTrackId(e.data.id),this.setVisitId(e.data.visitId),this.parameters=[],this.eventQueue.forEach(function(n){t.addRawEvent(e.data.visitId,n)}),e.data.calls.forEach(function(e){t[e.method].apply(t,e.params)}),!0},e.prototype.clearMe=function(){return i.Cookie.setCookie(this.config.keys.cookieId,""),o.SessionStorage.put(this.config.keys.cookieId,""),c.LocalStorage.put(this.config.keys.cookieId,""),!0},e.prototype.addEvent=function(e,t,n,i){void 0===i&&(i=null);var o=this.config.currentVisitId,a={category:e,action:t,value:n,params:i,time:Math.floor(Date.now()/1e3)};return o?this.addRawEvent(o,a):(this.eventQueue.push(a),!0)},e.prototype.onUnload=function(){var e=this.config.currentVisitId;if(e){window.performance&&window.performance.timing&&(this.savePerformance(e,this.information.getPerformance()),this.startTime=window.performance.timing.loadEventEnd);var t=(new Date).getTime(),n=(t-this.startTime)/1e3;t<=this.startTime&&(n=.1),this.saveVisitTime(e,n)}},e.prototype.makeRequest=function(e,t,n){if(window.fetch)window.fetch(e,{method:"POST",body:t,mode:"cors",credentials:"include"}).then(function(e){return e.json()}).then(function(e){return n(e),!0}).catch(function(e){console.log("There has been a problem with your fetch operation: ",e)});else try{var i=new XMLHttpRequest;return i.open("POST",e,!0),i.withCredentials=!0,i.onload=function(){200==i.status&&n(JSON.parse(i.responseText))},i.onerror=function(e){},i.send(t),i}catch(e){return null}},e.prototype.isBeaconEmpty=function(e){return!(e.parameters&&e.parameters.length>0||e.queue&&Object.keys(e.queue).length>0||e.data)},e.prototype.sendBeacon=function(){var e=this,t=this.getBeaconData();if(this.isBeaconEmpty(t))return!1;var n=this.config.endpoint+"?id="+t.id+"&rand="+Math.random(),i=JSON.stringify(t),o=window.navigator;if(o.sendBeacon&&o.sendBeacon(n,i))return this.getQueueList(!0),this.parameters=[],!0;var a=this.parameters;this.parameters=[];try{var r=new XMLHttpRequest;return r.open("POST",n,!0),r.withCredentials=!0,r.onload=function(){200==r.status&&(e.parameters=[],e.getQueueList(!0))},r.onerror=function(t){e.appendParameters(a)},r.send(i),!0}catch(e){return!1}},e.prototype.savePerformance=function(e,t){var n=this.getQueue(e);return n.performance=t,this.saveQueue(e,n),!0},e.prototype.saveLocalIps=function(e,t){var n=this.getQueue(e);return n.localIps=t,this.saveQueue(e,n),!0},e.prototype.addRawEvent=function(e,t){var n=this.getQueue(e);return n.event=n.event||[],n.event.push(t),this.saveQueue(e,n),!0},e.prototype.saveVisitTime=function(e,t){var n=this.getQueue(e);return n.visitTime=t,this.saveQueue(e,n),!0},e.prototype.getQueue=function(e){var t=c.LocalStorage.get(this.config.keys.queueId)||{};return void 0===t[e]?{}:t[e]},e.prototype.getQueueList=function(e){void 0===e&&(e=!0);var t=c.LocalStorage.get(this.config.keys.queueId)||{};return e&&c.LocalStorage.put(this.config.keys.queueId,{}),t},e.prototype.saveQueue=function(e,t){var n=c.LocalStorage.get(this.config.keys.queueId)||{};return n[e]=t,c.LocalStorage.put(this.config.keys.queueId,n),!0},e.prototype.setForceSendData=function(e){return this.forceData=e,this},e.prototype.track=function(){var e=this,t=this.getTrackData(),n=this.config.endpoint+"?id="+t.id+"&rand="+Math.random(),i=JSON.stringify(t);this.makeRequest(n,i,function(t){e.processResult(t),setTimeout(function(){try{e.information.getLocalIps(function(t){e.saveLocalIps(e.config.currentVisitId,t)})}catch(e){console.log(e)}},1500)})},e.prototype.setParameters=function(e){return this.parameters=e,this},e.prototype.appendParameters=function(e){var t=this;return e.forEach(function(e){t.parameters.push(e)}),this},e.prototype.addParameter=function(e,t,n){return this.parameters.push({param:e,value:t,points:n}),this},e.prototype.start=function(){this.track()},e}();t.Tracker=l},function(e,t,n){"use strict";t.__esModule=!0;var i=n(1),o=n(2),a=n(0),r=function(){function e(e){this.abTests=[],this.localIps=[],this.pageValue=null,this.setConfig(e)}return e.prototype.setPageValue=function(e){return this.pageValue=e,this},e.prototype.setABTests=function(e){return this.abTests=e,this},e.prototype.setConfig=function(e){return this.config=e,this},e.prototype.getScreen=function(){return{width:screen.width,height:screen.height,pixelDepth:screen.pixelDepth,availWidth:screen.availWidth,availHeight:screen.availHeight,colorDepth:screen.colorDepth}},e.prototype.getNavigator=function(){var e=this.config.window.navigator;return{appCodeName:e.appCodeName,appName:e.appName,appVersion:e.appVersion,cookieEnabled:e.cookieEnabled,doNotTrack:!!e.doNotTrack,hardwareConcurrency:0|e.hardwareConcurrency,language:e.language,languages:e.languages,maxTouchPoints:0|e.maxTouchPoints,platform:e.platform,product:e.product,productSub:e.productSub,userAgent:e.userAgent,vendor:e.vendor,vendorSub:e.vendorSub}},e.prototype.getTabId=function(){var e=this.config.keys.tabId,t=a.SessionStorage.get(e);if(t)return t;var n=o.LocalStorage.get(e);return n=1+(0|n),o.LocalStorage.put(e,n),a.SessionStorage.put(e,n),n},e.prototype.getPerformance=function(){var e=this.config.window.performance;if(!e)return null;var t=null;e.memory&&(t={jsHeapSizeLimit:e.memory.jsHeapSizeLimit,totalJSHeapSize:e.memory.totalJSHeapSize,usedJSHeapSize:e.memory.usedJSHeapSize});var n=null;return e.getEntries&&(n=e.getEntries()),{timing:e.timing,memory:t,entries:n}},e.prototype.getLocalIps=function(e){var t=[],n=window,i=n.RTCPeerConnection||n.webkitRTCPeerConnection||n.mozRTCPeerConnection;if(i){var o=new i({iceServers:[]});if(o.createDataChannel&&o.createDataChannel(""),o.onicecandidate=function(n){if(!n.candidate)return o.close(),e&&e(t),void(e=null);var i=/^candidate:.+ (\S+) \d+ typ/.exec(n.candidate.candidate);if(!i||!i[1])return e&&e(t),void(e=null);var a=i[1];-1==t.indexOf(a)&&t.push(a)},!o.createOffer)return e(t),void(e=null);try{o.createOffer().then(function(e){return o.setLocalDescription(e)}).catch(function(){e&&e(t),e=null})}catch(n){e&&e(t),e=null}}else e(t)},e.prototype.getData=function(e){return void 0===e&&(e=!1),{url:this.config.window.location.href,referrer:this.config.window.document.referrer,tabId:this.getTabId(),pageValue:this.pageValue,screen:e?null:this.getScreen(),cookie:e?null:i.Cookie.getCookiesList(),navigator:e?null:this.getNavigator(),prev:a.SessionStorage.get(this.config.keys.visitId),abTests:this.abTests,localIps:[],appVersion:this.config.appVersion}},e}();t.Information=r},function(e,t,n){"use strict";t.__esModule=!0;var i="tracking__",o={keys:{tabId:i+"tab_id",cookieId:i+"session_id",visitId:i+"visit_id",queueId:i+"queue"},endpoint:"",localId:Math.random().toString(),window:window,currentVisitId:null,appVersion:null};t.default=o},function(e,t,n){"use strict";function i(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===c}(e)}function o(e,t){return t&&!0===t.clone&&s(e)?r(function(e){return Array.isArray(e)?[]:{}}(e),e,t):e}function a(e,t,n){var i=e.slice();return t.forEach(function(t,a){void 0===i[a]?i[a]=o(t,n):s(t)?i[a]=r(e[a],t,n):-1===e.indexOf(t)&&i.push(o(t,n))}),i}function r(e,t,n){var i=Array.isArray(t);return i===Array.isArray(e)?i?((n||{arrayMerge:a}).arrayMerge||a)(e,t,n):function(e,t,n){var i={};return s(e)&&Object.keys(e).forEach(function(t){i[t]=o(e[t],n)}),Object.keys(t).forEach(function(a){s(t[a])&&e[a]?i[a]=r(e[a],t[a],n):i[a]=o(t[a],n)}),i}(e,t,n):o(t,n)}var s=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!i(e)},c="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;r.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce(function(e,n){return r(e,n,t)})};var l=r;e.exports=l}]),function(e,t){"function"==typeof define&&define.amd?define(function(){return t(e)}):t(e)}(this,function(e){var t=function(){function t(e){return null==e?String(e):z[W.call(e)]||"object"}function n(e){return"function"==t(e)}function i(e){return null!=e&&e==e.window}function o(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function a(e){return"object"==t(e)}function r(e){return a(e)&&!i(e)&&Object.getPrototypeOf(e)==Object.prototype}function s(e){var t=!!e&&"length"in e&&e.length,n=$.type(e);return"function"!=n&&!i(e)&&("array"==n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function c(e){return e.length>0?$.fn.concat.apply([],e):e}function l(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function u(e){return e in q?q[e]:q[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function d(e,t){return"number"!=typeof t||j[l(e)]?t:t+"px"}function p(e){return"children"in e?O.call(e.children):$.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function f(e,t){var n,i=e?e.length:0;for(n=0;i>n;n++)this[n]=e[n];this.length=i,this.selector=t||""}function h(e,t,n){for(k in t)n&&(r(t[k])||Z(t[k]))?(r(t[k])&&!r(e[k])&&(e[k]={}),Z(t[k])&&!Z(e[k])&&(e[k]=[]),h(e[k],t[k],n)):t[k]!==y&&(e[k]=t[k])}function m(e,t){return null==t?$(e):$(e).filter(t)}function v(e,t,i,o){return n(t)?t.call(e,i,o):t}function g(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function _(e,t){var n=e.className||"",i=n&&n.baseVal!==y;return t===y?i?n.baseVal:n:void(i?n.baseVal=t:e.className=t)}function b(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?$.parseJSON(e):e):e}catch(t){return e}}var y,k,$,w,C,x,S=[],T=S.concat,I=S.filter,O=S.slice,P=e.document,E={},q={},j={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},A=/^\s*<(\w+|!)[^>]*>/,N=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,D=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,F=/^(?:body|html)$/i,R=/([A-Z])/g,M=["val","css","html","text","data","width","height","offset"],L=P.createElement("table"),B=P.createElement("tr"),V={tr:P.createElement("tbody"),tbody:L,thead:L,tfoot:L,td:B,th:B,"*":P.createElement("div")},U=/complete|loaded|interactive/,H=/^[\w-]*$/,z={},W=z.toString,Q={},K=P.createElement("div"),J={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Z=Array.isArray||function(e){return e instanceof Array};return Q.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,o=e.parentNode,a=!o;return a&&(o=K).appendChild(e),i=~Q.qsa(o,t).indexOf(e),a&&K.removeChild(e),i},C=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},x=function(e){return I.call(e,function(t,n){return e.indexOf(t)==n})},Q.fragment=function(e,t,n){var i,o,a;return N.test(e)&&(i=$(P.createElement(RegExp.$1))),i||(e.replace&&(e=e.replace(D,"<$1></$2>")),t===y&&(t=A.test(e)&&RegExp.$1),t in V||(t="*"),(a=V[t]).innerHTML=""+e,i=$.each(O.call(a.childNodes),function(){a.removeChild(this)})),r(n)&&(o=$(i),$.each(n,function(e,t){M.indexOf(e)>-1?o[e](t):o.attr(e,t)})),i},Q.Z=function(e,t){return new f(e,t)},Q.isZ=function(e){return e instanceof Q.Z},Q.init=function(e,t){var i;if(!e)return Q.Z();if("string"==typeof e)if("<"==(e=e.trim())[0]&&A.test(e))i=Q.fragment(e,RegExp.$1,t),e=null;else{if(t!==y)return $(t).find(e);i=Q.qsa(P,e)}else{if(n(e))return $(P).ready(e);if(Q.isZ(e))return e;if(Z(e))i=function(e){return I.call(e,function(e){return null!=e})}(e);else if(a(e))i=[e],e=null;else if(A.test(e))i=Q.fragment(e.trim(),RegExp.$1,t),e=null;else{if(t!==y)return $(t).find(e);i=Q.qsa(P,e)}}return Q.Z(i,e)},($=function(e,t){return Q.init(e,t)}).extend=function(e){var t,n=O.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){h(e,n,t)}),e},Q.qsa=function(e,t){var n,i="#"==t[0],o=!i&&"."==t[0],a=i||o?t.slice(1):t,r=H.test(a);return e.getElementById&&r&&i?(n=e.getElementById(a))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:O.call(r&&!i&&e.getElementsByClassName?o?e.getElementsByClassName(a):e.getElementsByTagName(t):e.querySelectorAll(t))},$.contains=P.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},$.type=t,$.isFunction=n,$.isWindow=i,$.isArray=Z,$.isPlainObject=r,$.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},$.isNumeric=function(e){var t=Number(e),n=typeof e;return null!=e&&"boolean"!=n&&("string"!=n||e.length)&&!isNaN(t)&&isFinite(t)||!1},$.inArray=function(e,t,n){return S.indexOf.call(t,e,n)},$.camelCase=C,$.trim=function(e){return null==e?"":String.prototype.trim.call(e)},$.uuid=0,$.support={},$.expr={},$.noop=function(){},$.map=function(e,t){var n,i,o,a=[];if(s(e))for(i=0;i<e.length;i++)null!=(n=t(e[i],i))&&a.push(n);else for(o in e)null!=(n=t(e[o],o))&&a.push(n);return c(a)},$.each=function(e,t){var n,i;if(s(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(i in e)if(!1===t.call(e[i],i,e[i]))return e;return e},$.grep=function(e,t){return I.call(e,t)},e.JSON&&($.parseJSON=JSON.parse),$.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){z["[object "+t+"]"]=t.toLowerCase()}),$.fn={constructor:Q.Z,length:0,forEach:S.forEach,reduce:S.reduce,push:S.push,sort:S.sort,splice:S.splice,indexOf:S.indexOf,concat:function(){var e,t,n=[];for(e=0;e<arguments.length;e++)t=arguments[e],n[e]=Q.isZ(t)?t.toArray():t;return T.apply(Q.isZ(this)?this.toArray():this,n)},map:function(e){return $($.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return $(O.apply(this,arguments))},ready:function(e){return U.test(P.readyState)&&P.body?e($):P.addEventListener("DOMContentLoaded",function(){e($)},!1),this},get:function(e){return e===y?O.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return S.every.call(this,function(t,n){return!1!==e.call(t,n,t)}),this},filter:function(e){return n(e)?this.not(this.not(e)):$(I.call(this,function(t){return Q.matches(t,e)}))},add:function(e,t){return $(x(this.concat($(e,t))))},is:function(e){return this.length>0&&Q.matches(this[0],e)},not:function(e){var t=[];if(n(e)&&e.call!==y)this.each(function(n){e.call(this,n)||t.push(this)});else{var i="string"==typeof e?this.filter(e):s(e)&&n(e.item)?O.call(e):$(e);this.forEach(function(e){i.indexOf(e)<0&&t.push(e)})}return $(t)},has:function(e){return this.filter(function(){return a(e)?$.contains(this,e):$(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!a(e)?e:$(e)},last:function(){var e=this[this.length-1];return e&&!a(e)?e:$(e)},find:function(e){var t=this;return e?"object"==typeof e?$(e).filter(function(){var e=this;return S.some.call(t,function(t){return $.contains(t,e)})}):1==this.length?$(Q.qsa(this[0],e)):this.map(function(){return Q.qsa(this,e)}):$()},closest:function(e,t){var n=[],i="object"==typeof e&&$(e);return this.each(function(a,r){for(;r&&!(i?i.indexOf(r)>=0:Q.matches(r,e));)r=r!==t&&!o(r)&&r.parentNode;r&&n.indexOf(r)<0&&n.push(r)}),$(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=$.map(n,function(e){return(e=e.parentNode)&&!o(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return m(t,e)},parent:function(e){return m(x(this.pluck("parentNode")),e)},children:function(e){return m(this.map(function(){return p(this)}),e)},contents:function(){return this.map(function(){return this.contentDocument||O.call(this.childNodes)})},siblings:function(e){return m(this.map(function(e,t){return I.call(p(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return $.map(this,function(t){return t[e]})},show:function(){return this.each(function(){var e,t,n;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,E[e]||(t=P.createElement(e),P.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),E[e]=n),E[e]))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=n(e);if(this[0]&&!t)var i=$(e).get(0),o=i.parentNode||this.length>1;return this.each(function(n){$(this).wrapAll(t?e.call(this,n):o?i.cloneNode(!0):i)})},wrapAll:function(e){if(this[0]){$(this[0]).before(e=$(e));for(var t;(t=e.children()).length;)e=t.first();$(e).append(this)}return this},wrapInner:function(e){var t=n(e);return this.each(function(n){var i=$(this),o=i.contents(),a=t?e.call(this,n):e;o.length?o.wrapAll(a):i.append(a)})},unwrap:function(){return this.parent().each(function(){$(this).replaceWith($(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=$(this);(e===y?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return $(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return $(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var n=this.innerHTML;$(this).empty().append(v(this,e,t,n))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var n=v(this,e,t,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this.pluck("textContent").join(""):null},attr:function(e,t){var n;return"string"!=typeof e||1 in arguments?this.each(function(n){if(1===this.nodeType)if(a(e))for(k in e)g(this,k,e[k]);else g(this,e,v(this,t,n,this.getAttribute(e)))}):0 in this&&1==this[0].nodeType&&null!=(n=this[0].getAttribute(e))?n:y},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){g(this,e)},this)})},prop:function(e,t){return e=J[e]||e,1 in arguments?this.each(function(n){this[e]=v(this,t,n,this[e])}):this[0]&&this[0][e]},removeProp:function(e){return e=J[e]||e,this.each(function(){delete this[e]})},data:function(e,t){var n="data-"+e.replace(R,"-$1").toLowerCase(),i=1 in arguments?this.attr(n,t):this.attr(n);return null!==i?b(i):y},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each(function(t){this.value=v(this,e,t,this.value)})):this[0]&&(this[0].multiple?$(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var n=$(this),i=v(this,t,e,n.offset()),o=n.offsetParent().offset(),a={top:i.top-o.top,left:i.left-o.left};"static"==n.css("position")&&(a.position="relative"),n.css(a)});if(!this.length)return null;if(P.documentElement!==this[0]&&!$.contains(P.documentElement,this[0]))return{top:0,left:0};var n=this[0].getBoundingClientRect();return{left:n.left+e.pageXOffset,top:n.top+e.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}},css:function(e,n){if(arguments.length<2){var i=this[0];if("string"==typeof e){if(!i)return;return i.style[C(e)]||getComputedStyle(i,"").getPropertyValue(e)}if(Z(e)){if(!i)return;var o={},a=getComputedStyle(i,"");return $.each(e,function(e,t){o[t]=i.style[C(t)]||a.getPropertyValue(t)}),o}}var r="";if("string"==t(e))n||0===n?r=l(e)+":"+d(e,n):this.each(function(){this.style.removeProperty(l(e))});else for(k in e)e[k]||0===e[k]?r+=l(k)+":"+d(k,e[k])+";":this.each(function(){this.style.removeProperty(l(k))});return this.each(function(){this.style.cssText+=";"+r})},index:function(e){return e?this.indexOf($(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&S.some.call(this,function(e){return this.test(_(e))},u(e))},addClass:function(e){return e?this.each(function(t){if("className"in this){w=[];var n=_(this);v(this,e,t,n).split(/\s+/g).forEach(function(e){$(this).hasClass(e)||w.push(e)},this),w.length&&_(this,n+(n?" ":"")+w.join(" "))}}):this},removeClass:function(e){return this.each(function(t){if("className"in this){if(e===y)return _(this,"");w=_(this),v(this,e,t,w).split(/\s+/g).forEach(function(e){w=w.replace(u(e)," ")}),_(this,w.trim())}})},toggleClass:function(e,t){return e?this.each(function(n){var i=$(this);v(this,e,n,_(this)).split(/\s+/g).forEach(function(e){(t===y?!i.hasClass(e):t)?i.addClass(e):i.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===y?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===y?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),i=F.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat($(e).css("margin-top"))||0,n.left-=parseFloat($(e).css("margin-left"))||0,i.top+=parseFloat($(t[0]).css("border-top-width"))||0,i.left+=parseFloat($(t[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||P.body;e&&!F.test(e.nodeName)&&"static"==$(e).css("position");)e=e.offsetParent;return e})}},$.fn.detach=$.fn.remove,["width","height"].forEach(function(e){var t=e.replace(/./,function(e){return e[0].toUpperCase()});$.fn[e]=function(n){var a,r=this[0];return n===y?i(r)?r["inner"+t]:o(r)?r.documentElement["scroll"+t]:(a=this.offset())&&a[e]:this.each(function(t){(r=$(this)).css(e,v(this,n,t,r[e]()))})}}),["after","prepend","before","append"].forEach(function(n,i){var o=i%2;$.fn[n]=function(){var n,a,r=$.map(arguments,function(e){var i=[];return"array"==(n=t(e))?(e.forEach(function(e){return e.nodeType!==y?i.push(e):$.zepto.isZ(e)?i=i.concat(e.get()):void(i=i.concat(Q.fragment(e)))}),i):"object"==n||null==e?e:Q.fragment(e)}),s=this.length>1;return r.length<1?this:this.each(function(t,n){a=o?n:n.parentNode,n=0==i?n.nextSibling:1==i?n.firstChild:2==i?n:null;var c=$.contains(P.documentElement,a);r.forEach(function(t){if(s)t=t.cloneNode(!0);else if(!a)return $(t).remove();a.insertBefore(t,n),c&&function e(t,n){n(t);for(var i=0,o=t.childNodes.length;o>i;i++)e(t.childNodes[i],n)}(t,function(t){if(!(null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src)){var n=t.ownerDocument?t.ownerDocument.defaultView:e;n.eval.call(n,t.innerHTML)}})})})},$.fn[o?n+"To":"insert"+(i?"Before":"After")]=function(e){return $(e)[n](this),this}}),Q.Z.prototype=f.prototype=$.fn,Q.uniq=x,Q.deserializeValue=b,$.zepto=Q,$}();return e.Zepto=t,void 0===e.$&&(e.$=t),function(t){function n(e){return e._zid||(e._zid=p++)}function i(e,t,i,a){if((t=o(t)).ns)var r=function(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}(t.ns);return(v[n(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||r.test(e.ns))&&(!i||n(e.fn)===n(i))&&(!a||e.sel==a)})}function o(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function a(e,t){return e.del&&!_&&e.e in b||!!t}function r(e){return y[e]||_&&b[e]||e}function s(e,i,s,c,u,p,f){var h=n(e),m=v[h]||(v[h]=[]);i.split(/\s/).forEach(function(n){if("ready"==n)return t(document).ready(s);var i=o(n);i.fn=s,i.sel=u,i.e in y&&(s=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?i.fn.apply(this,arguments):void 0}),i.del=p;var h=p||s;i.proxy=function(t){if(!(t=l(t)).isImmediatePropagationStopped()){t.data=c;var n=h.apply(e,t._args==d?[t]:[t].concat(t._args));return!1===n&&(t.preventDefault(),t.stopPropagation()),n}},i.i=m.length,m.push(i),"addEventListener"in e&&e.addEventListener(r(i.e),i.proxy,a(i,f))})}function c(e,t,o,s,c){var l=n(e);(t||"").split(/\s/).forEach(function(t){i(e,t,o,s).forEach(function(t){delete v[l][t.i],"removeEventListener"in e&&e.removeEventListener(r(t.e),t.proxy,a(t,c))})})}function l(e,n){return(n||!e.isDefaultPrevented)&&(n||(n=e),t.each(C,function(t,i){var o=n[t];e[t]=function(){return this[i]=k,o&&o.apply(n,arguments)},e[i]=$}),e.timeStamp||(e.timeStamp=Date.now()),(n.defaultPrevented!==d?n.defaultPrevented:"returnValue"in n?!1===n.returnValue:n.getPreventDefault&&n.getPreventDefault())&&(e.isDefaultPrevented=k)),e}function u(e){var t,n={originalEvent:e};for(t in e)w.test(t)||e[t]===d||(n[t]=e[t]);return l(n,e)}var d,p=1,f=Array.prototype.slice,h=t.isFunction,m=function(e){return"string"==typeof e},v={},g={},_="onfocusin"in e,b={focus:"focusin",blur:"focusout"},y={mouseenter:"mouseover",mouseleave:"mouseout"};g.click=g.mousedown=g.mouseup=g.mousemove="MouseEvents",t.event={add:s,remove:c},t.proxy=function(e,i){var o=2 in arguments&&f.call(arguments,2);if(h(e)){var a=function(){return e.apply(i,o?o.concat(f.call(arguments)):arguments)};return a._zid=n(e),a}if(m(i))return o?(o.unshift(e[i],e),t.proxy.apply(null,o)):t.proxy(e[i],e);throw new TypeError("expected function")},t.fn.bind=function(e,t,n){return this.on(e,t,n)},t.fn.unbind=function(e,t){return this.off(e,t)},t.fn.one=function(e,t,n,i){return this.on(e,t,n,i,1)};var k=function(){return!0},$=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,C={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(e,t,n){return this.on(t,e,n)},t.fn.undelegate=function(e,t,n){return this.off(t,e,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,n,i,o,a){var r,l,p=this;return e&&!m(e)?(t.each(e,function(e,t){p.on(e,n,i,t,a)}),p):(m(n)||h(o)||!1===o||(o=i,i=n,n=d),(o===d||!1===i)&&(o=i,i=d),!1===o&&(o=$),p.each(function(d,p){a&&(r=function(e){return c(p,e.type,o),o.apply(this,arguments)}),n&&(l=function(e){var i,a=t(e.target).closest(n,p).get(0);return a&&a!==p?(i=t.extend(u(e),{currentTarget:a,liveFired:p}),(r||o).apply(a,[i].concat(f.call(arguments,1)))):void 0}),s(p,e,o,i,n,l||r)}))},t.fn.off=function(e,n,i){var o=this;return e&&!m(e)?(t.each(e,function(e,t){o.off(e,n,t)}),o):(m(n)||h(i)||!1===i||(i=n,n=d),!1===i&&(i=$),o.each(function(){c(this,e,i,n)}))},t.fn.trigger=function(e,n){return(e=m(e)||t.isPlainObject(e)?t.Event(e):l(e))._args=n,this.each(function(){e.type in b&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,n)})},t.fn.triggerHandler=function(e,n){var o,a;return this.each(function(r,s){(o=u(m(e)?t.Event(e):e))._args=n,o.target=s,t.each(i(s,e.type||e),function(e,t){return a=t.proxy(o),!o.isImmediatePropagationStopped()&&void 0})}),a},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),t.Event=function(e,t){m(e)||(e=(t=e).type);var n=document.createEvent(g[e]||"Events"),i=!0;if(t)for(var o in t)"bubbles"==o?i=!!t[o]:n[o]=t[o];return n.initEvent(e,i,!0),l(n)}}(t),function(t){function n(e,n,i){var o=t.Event(n);return t(e).trigger(o,i),!o.isDefaultPrevented()}function i(e,t,i,o){return e.global?n(t||g,i,o):void 0}function o(e){e.global&&0==t.active++&&i(e,null,"ajaxStart")}function a(e){e.global&&!--t.active&&i(e,null,"ajaxStop")}function r(e,t){var n=t.context;return!1!==t.beforeSend.call(n,e,t)&&!1!==i(t,n,"ajaxBeforeSend",[e,t])&&void i(t,n,"ajaxSend",[e,t])}function s(e,t,n,o){var a=n.context,r="success";n.success.call(a,e,r,t),o&&o.resolveWith(a,[e,r,t]),i(n,a,"ajaxSuccess",[t,n,e]),l(r,t,n)}function c(e,t,n,o,a){var r=o.context;o.error.call(r,n,t,e),a&&a.rejectWith(r,[n,t,e]),i(o,r,"ajaxError",[n,o,e||t]),l(t,n,o)}function l(e,t,n){var o=n.context;n.complete.call(o,t,e),i(n,o,"ajaxComplete",[t,n]),a(n)}function u(){}function d(e){return e&&(e=e.split(";",2)[0]),e&&(e==$?"html":e==k?"json":b.test(e)?"script":y.test(e)&&"xml")||"text"}function p(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function f(e,n,i,o){return t.isFunction(n)&&(o=i,i=n,n=void 0),t.isFunction(i)||(o=i,i=void 0),{url:e,data:n,success:i,dataType:o}}var h,m,v=+new Date,g=e.document,_=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,b=/^(?:text|application)\/javascript/i,y=/^(?:text|application)\/xml/i,k="application/json",$="text/html",w=/^\s*$/,C=g.createElement("a");C.href=e.location.href,t.active=0,t.ajaxJSONP=function(n,i){if(!("type"in n))return t.ajax(n);var o,a,l=n.jsonpCallback,u=(t.isFunction(l)?l():l)||"Zepto"+v++,d=g.createElement("script"),p=e[u],f=function(e){t(d).triggerHandler("error",e||"abort")},h={abort:f};return i&&i.promise(h),t(d).on("load error",function(r,l){clearTimeout(a),t(d).off().remove(),"error"!=r.type&&o?s(o[0],h,n,i):c(null,l||"error",h,n,i),e[u]=p,o&&t.isFunction(p)&&p(o[0]),p=o=void 0}),!1===r(h,n)?(f("abort"),h):(e[u]=function(){o=arguments},d.src=n.url.replace(/\?(.+)=\?/,"?$1="+u),g.head.appendChild(d),n.timeout>0&&(a=setTimeout(function(){f("timeout")},n.timeout)),h)},t.ajaxSettings={type:"GET",beforeSend:u,success:u,error:u,complete:u,context:null,global:!0,xhr:function(){return new e.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:k,xml:"application/xml, text/xml",html:$,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:u},t.ajax=function(n){var i,a,l=t.extend({},n||{}),f=t.Deferred&&t.Deferred();for(h in t.ajaxSettings)void 0===l[h]&&(l[h]=t.ajaxSettings[h]);o(l),l.crossDomain||((i=g.createElement("a")).href=l.url,i.href=i.href,l.crossDomain=C.protocol+"//"+C.host!=i.protocol+"//"+i.host),l.url||(l.url=e.location.toString()),(a=l.url.indexOf("#"))>-1&&(l.url=l.url.slice(0,a)),function(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()&&"jsonp"!=e.dataType||(e.url=p(e.url,e.data),e.data=void 0)}(l);var v=l.dataType,_=/\?.+=\?/.test(l.url);if(_&&(v="jsonp"),!1!==l.cache&&(n&&!0===n.cache||"script"!=v&&"jsonp"!=v)||(l.url=p(l.url,"_="+Date.now())),"jsonp"==v)return _||(l.url=p(l.url,l.jsonp?l.jsonp+"=?":!1===l.jsonp?"":"callback=?")),t.ajaxJSONP(l,f);var b,y=l.accepts[v],k={},$=function(e,t){k[e.toLowerCase()]=[e,t]},x=/^([\w-]+:)\/\//.test(l.url)?RegExp.$1:e.location.protocol,S=l.xhr(),T=S.setRequestHeader;if(f&&f.promise(S),l.crossDomain||$("X-Requested-With","XMLHttpRequest"),$("Accept",y||"*/*"),(y=l.mimeType||y)&&(y.indexOf(",")>-1&&(y=y.split(",",2)[0]),S.overrideMimeType&&S.overrideMimeType(y)),(l.contentType||!1!==l.contentType&&l.data&&"GET"!=l.type.toUpperCase())&&$("Content-Type",l.contentType||"application/x-www-form-urlencoded"),l.headers)for(m in l.headers)$(m,l.headers[m]);if(S.setRequestHeader=$,S.onreadystatechange=function(){if(4==S.readyState){S.onreadystatechange=u,clearTimeout(b);var e,n=!1;if(S.status>=200&&S.status<300||304==S.status||0==S.status&&"file:"==x){if(v=v||d(l.mimeType||S.getResponseHeader("content-type")),"arraybuffer"==S.responseType||"blob"==S.responseType)e=S.response;else{e=S.responseText;try{e=function(e,t,n){if(n.dataFilter==u)return e;var i=n.context;return n.dataFilter.call(i,e,t)}(e,v,l),"script"==v?(0,eval)(e):"xml"==v?e=S.responseXML:"json"==v&&(e=w.test(e)?null:t.parseJSON(e))}catch(e){n=e}if(n)return c(n,"parsererror",S,l,f)}s(e,S,l,f)}else c(S.statusText||null,S.status?"error":"abort",S,l,f)}},!1===r(S,l))return S.abort(),c(null,"abort",S,l,f),S;var I=!("async"in l)||l.async;if(S.open(l.type,l.url,I,l.username,l.password),l.xhrFields)for(m in l.xhrFields)S[m]=l.xhrFields[m];for(m in k)T.apply(S,k[m]);return l.timeout>0&&(b=setTimeout(function(){S.onreadystatechange=u,S.abort(),c(null,"timeout",S,l,f)},l.timeout)),S.send(l.data?l.data:null),S},t.get=function(){return t.ajax(f.apply(null,arguments))},t.post=function(){var e=f.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=f.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var o,a=this,r=e.split(/\s/),s=f(e,n,i),c=s.success;return r.length>1&&(s.url=r[0],o=r[1]),s.success=function(e){a.html(o?t("<div>").html(e.replace(_,"")).find(o):e),c&&c.apply(a,arguments)},t.ajax(s),this};var x=encodeURIComponent;t.param=function(e,n){var i=[];return i.add=function(e,n){t.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(x(e)+"="+x(n))},function e(n,i,o,a){var r,s=t.isArray(i),c=t.isPlainObject(i);t.each(i,function(i,l){r=t.type(l),a&&(i=o?a:a+"["+(c||"object"==r||"array"==r?i:"")+"]"),!a&&s?n.add(l.name,l.value):"array"==r||!o&&"object"==r?e(n,l,o,i):n.add(i,l)})}(i,e,n),i.join("&").replace(/%20/g,"+")}}(t),function(e){e.fn.serializeArray=function(){var t,n,i=[],o=function(e){return e.forEach?e.forEach(o):void i.push({name:t,value:e})};return this[0]&&e.each(this[0].elements,function(i,a){n=a.type,(t=a.name)&&"fieldset"!=a.nodeName.toLowerCase()&&!a.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||a.checked)&&o(e(a).val())}),i},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(t),function(){try{getComputedStyle(void 0)}catch(n){var t=getComputedStyle;e.getComputedStyle=function(e,n){try{return t(e,n)}catch(e){return null}}}}(),t}),function(e){e.fn.unveil=function(t,n){var i,o=e(window),a=t||0,r=window.devicePixelRatio>1?"data-src-retina":"data-src",s=this;function c(t){var n;n=t?0:a;var r=s.filter(function(){var t=e(this);if("none"!=t.css("display")&&"hidden"!=t.css("visibility")&&(0!=t.offset().width||0!=t.offset().height)){var i=o.scrollTop(),a=i+o.height(),r=t.offset().top;return r+t.height()>=i-n&&r<=a+n&&!e(this).hasClass("lazyback")}});i=r.trigger("unveil"),s=s.not(i)}return this.one("unveil",function(){var t=this.getAttribute(r);if(t=t||this.getAttribute("data-src")){if(e(this).is("img")){var i=this.getAttribute("data-srcset");i&&this.setAttribute("srcset",i),this.setAttribute("src",t)}else e(this).css("background-image","url('"+t+"')");"function"==typeof n&&n.call(this)}}),"object"==typeof common&&"function"==typeof common.byWindowAction?common.byWindowAction(["scroll","resize","lookup"],c):o.on("scroll.unveil resize.unveil lookup.unveil",c),c(!0),this}}(window.jQuery||window.Zepto);var common=new Common,header=new Header,footer=new Footer;if(common.init_bg_all(),common.init_lazyload(),common.initWindowAction(),common.initUserInteraction(),common.initParameters(),common.cleanURL(),common.csrf.init(),common.pwa.initiate(),$("header").length&&"review"!==common.parameters.page_type&&(header.menu.initiate(),header.search.initiate(),header.top_banner.initiate()),$("footer").length&&"review"!==common.parameters.page_type&&(footer.links.initiate(),footer.subscribe.initiate(),footer.social.initiate(),("tdp"!==common.parameters.page_type||"tdp"===common.parameters.page_type&&!$("body").hasClass("mob"))&&footer.olark.initiate(),footer.elems(),"#chat"==location.hash)){footer.olark.load();var OlarkChatLoaded=setInterval(function(){"function"==typeof olark&&(clearInterval(OlarkChatLoaded),olark("api.box.expand"))},10)}function AdminQuestions(){var e=this,t=common;e.isInitiated=!1,e.objectType=null,e.objectId=null,e.init=function(n){e.objectType=n.objectType,e.objectId=n.objectId,$(".ask-a").click(function(n){n.preventDefault();if(e.isInitiated)$("#ask_popup .dif").addClass("hid"),$("#ask_popup .dif.ask").removeClass("hid"),$(".ask_admin_link").click();else{e.isInitiated=!0;var i=$(this),o=i.html();i.html('<img class="l" src="/im/r/pw/tr-loader-small.gif">'),t.send_request("/pw_common/ask_question_admin",{},function(n){n&&"OK"==n.status&&($("main").append(n.popup),$("#ask_popup .dif").addClass("hid"),$("#ask_popup .dif.ask").removeClass("hid"),$("#ask_popup_admin .but").click(function(t){t.preventDefault(),e.ask_admin_submit()}),$("#super_form_file").change(function(){e.another_file=null,$(this)[0].files.length>0&&(e.another_file=$(this)[0].files[0])}),t.lib.init("popup",function(){$(".ask_admin_link").magnificPopup({closeOnBgClick:!0,callbacks:{open:function(){$("#ask_popup_admin .overlay").find("textarea, inout, select").val("")}}}),$(".ask_admin_link_success").magnificPopup({closeOnBgClick:!0}),$("#ask_popup_admin_success .but").click(function(e){$(this).hasClass("blue")||(e.preventDefault(),$.magnificPopup.close())}),i.html(o),$(".ask_admin_link").click()}))})}})},e.ask_admin_submit=function(){var n=$("#ask_popup_admin form"),i=$.trim(n.find("#super_form_question").val()),o=$.trim(n.find("#super_form_answer").val()),a=$.trim(n.find("#super_form_link").val()),r=$.trim(n.find('input[name="email"]').val()),s=!1;if(i?!(n.find('input[name="email"]').length>0)||r&&t.func.check_string(r,"email")?o||(s="Please enter your answer."):s="Please enter valid email address.":s="Please enter your question.",s)alert(s);else{var c={question:i,answer:o,link:a,email:r,object_type:e.objectType,object_id:e.objectId};t.send_request(n.attr("action"),c,function(t){"OK"==t.status&&(e.another_file?(xhr=new XMLHttpRequest,xhr.open("POST","/faq/upload_file/"+t.answer_id,!0),xhr.setRequestHeader("X_FILENAME",e.another_file.name),xhr.onreadystatechange=function(){4==xhr.readyState&&($("#ask_popup_admin_success .but.blue").attr("href","/faq/question/"+t.question.id+"-"+t.question.code),$(".ask_admin_link_success").click())},xhr.send(e.another_file)):($("#ask_popup_admin_success .but.blue").attr("href","/faq/question/"+t.question.id+"-"+t.question.code),$(".ask_admin_link_success").click()))})}}}function Timer(e,t,n){var i=this;n=n||1,i.initiate=function(){e.length>0&&(i.timer=null,i.endMoment=i.getCurrentTimestamp()+t,document.addEventListener("visibilitychange",function(){"visible"==document.visibilityState?i.restart():i.stop()},!1),i.start())},i.getCurrentTimestamp=function(){return Math.round(new Date/1e3)},i.restart=function(){i.stop(),i.start()},i.start=function(){i.timer=setInterval(function(){var t=i.endMoment-i.getCurrentTimestamp();if(t>0){var n=Math.floor(t/3600),o=Math.floor((t-3600*n)/60),a=parseInt(t-3600*n-60*o);e.text(i.format(n,o,a))}else e.hide()},1e3*n)},i.stop=function(){clearInterval(i.timer)},i.format=function(e,t,n){return[e>=10?e:"0"+e,t>=10?t:"0"+t,n>=10?n:"0"+n].join(":")}}function Operator(){var e=this,t=common,n=footer,i=new AdminQuestions,o=new UnlockSavingPopup(t),a=new TermsSalePopup(t);e.get_operator_id=function(){return void 0===e.operator_id&&(e.operator_id=$("main").attr("data-id")),e.operator_id},e.get_operator_name=function(){return void 0===e.operator_name&&(e.operator_name=$("main h1").html()),e.operator_name},e.initiate=function(){$("body").hasClass("mob")?setTimeout(function(){t.load_css(t.get_cdn_url()+"include/pw/operator/async.css")},1e3):t.load_css(t.get_cdn_url()+"include/pw/operator/async.css"),e.dynamic.initiate(),e.highlights.initiate(),e.reviews.initiate(),e.questions.initiate(),e.faq_search.initiate(),e.hash.menu(),e.hash.read(),e.ask.initiate();var o=$(".js-sale-line .js-ends");o.length>0&&new Timer(o.find("span"),o.data("ends")).initiate(),n.olark.show(),i.init({objectType:"operator",objectId:e.get_operator_id()})},e.dynamic={initiate:function(){$(".pandl .p").length&&e.dynamic.tours_images.initiate(),e.supportScrollIntoView="function"==typeof $("body")[0].scrollIntoView,e.dynamic.agents.initiate(),e.dynamic.guides(),e.dynamic.tours(),$("body").hasClass("tab")||e.dynamic.social.initiate(),e.dynamic.fixed_elements(),$(".bl .b.aw img, .bl .b.aw div").click(function(){e.hash.scroll($(".b.awd"),100)}),$(".bl .b.gu img, .bl .b.gu div").click(function(){e.hash.scroll($(".b.gui"),100)}),e.dynamic.tc(),e.dynamic.video.initiate(),o.load(),a.load()},social:{initiate:function(){e.dynamic.social.fb(),e.dynamic.social.tw()},fb:function(){$(".sbtn .fb").click(function(e){e.preventDefault(),popup=window.open("https://www.facebook.com/sharer.php?u="+encodeURIComponent(location.href),"popupwindow","scrollbars=yes,width=800,height=400"),popup.focus()})},tw:function(){$(".sbtn .tw").click(function(e){e.preventDefault(),popup=window.open("https://twitter.com/share?url="+encodeURIComponent(location.href)+"&hashtags=TourRadar,gotouring,wanderlust","popupwindow","scrollbars=yes,width=800,height=400"),popup.focus()})}},video:{initiate:function(){$("body").hasClass("mob")&&$(".vid .video").length&&$(".vid .video").height($(".vid .video").width()/16*9),$(".vid .play").click(function(){var n=$(".vid .video").data("id");$("#video-"+n).length||($(".vid .play").hide(),t.send_request("/pw_operator/load",{action:"loadVideo",id:e.get_operator_id(),videoId:n},function(i){i&&"OK"==i.status&&($(".vid img.prev").addClass("hid"),"youtube"==i.component.type?$("<iframe>",{width:$(".vid .video").width(),height:$(".vid .video").height(),src:"//www.youtube-nocookie.com/embed/"+i.component.videoId+"?rel=0&autoplay=1&controls=0&showinfo=0",id:"video"+n,frameborder:0,allowfullscreen:!0,scrolling:"no"}).appendTo(".vid .video"):"vimeo"==i.component.type&&$("<iframe>",{width:$(".vid .video").width(),height:$(".vid .video").height(),src:"//player.vimeo.com/video/"+i.component.videoId+"?autoplay=1&badge=0&title=0",id:"video"+n,frameborder:0,allowfullscreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0,scrolling:"no"}).appendTo(".vid .video"),t.send_google_event("Video Click","Play",e.get_operator_name()+" - "+$(".vid li.active").text()))}))}),$(".vid li[data-id]").click(function(){var n=$(this).data("id");$(".vid li").removeClass("active"),$(this).addClass("active"),$(".vid .play").show(),$(".vid .video").removeClass("pending"),$(".vid .video").data("id",n),$(".vid iframe").remove(),$('.vid img.prev[data-id="'+n+'"]').length?($(".vid img.prev").addClass("hid"),$('.vid img.prev[data-id="'+n+'"]').removeClass("hid")):($(".vid .video").addClass("pending"),t.send_request("/pw_operator/load",{action:"loadVideo",id:e.get_operator_id(),videoId:n},function(t){t&&"OK"==t.status&&("youtube"==t.component.type?$(".vid img.prev").last().after('<img class="prev" src="'+t.component.image+'" data-id="'+t.component.id+'"/>'):"vimeo"==t.component.type&&($(".vid img.prev").last().after('<img class="prev vim" data-vim="'+t.component.videoId+'" src="" data-id="'+t.component.id+'"/>'),e.dynamic.video.loadVimeoImage(t.component.videoId)),$(".vid .video").removeClass("pending"),$(".vid img.prev").addClass("hid"),$('.vid img.prev[data-id="'+n+'"]').removeClass("hid"))})),t.send_google_event("Video Click","Change Video",e.get_operator_name()+" - "+$(".vid li.active").text())}),$(".vid li:not([data-id])").click(function(){$(this).remove(),$(".vid li").removeClass("hid")}),$(window).resize(function(){$(".vid iframe, .vid .video").height($(".vid .video").width()/16*9)}),$(".vid .video img.prev.vim").length&&(t.func.is_element_on_screen($(".vid"),0)&&e.dynamic.video.loadVimeoImage($(".vid .video img.prev.vim").data("vim")),$(window).on("scroll",function(){t.func.is_element_on_screen($(".vid"),0)&&e.dynamic.video.loadVimeoImage($(".vid .video img.prev.vim").data("vim"))}))},loadVimeoImage:function(e){$('.vid img.prev[data-vim="'+e+'"]').hasClass("done")||t.send_request("//vimeo.com/api/v2/video/"+e+".json?callback=?",{},function(e){$('.vid img.prev[data-vim="'+e[0].id+'"]').attr("src",e[0].thumbnail_large).addClass("done")})}},tc:function(){$(".lo .tc, .ttip").length&&t.byUserInteraction("operator-tooltips",function(){$(".lo .tc").hasClass("ttip")||$(".lo .tc").addClass("ttip"),t.lib.init("tooltip")})},guides:function(){$(".gui .more .but").one("click",function(){var n=[];$(".gui ul li").each(function(){n.push($(this).attr("data-id"))}),$(".gui .more .but").html('<img class="l" src="/im/r/pw/tr-loader-small.gif">'),t.send_request("/pw_operator/load",{action:"guides",id:e.get_operator_id(),ids:n},function(e){e&&"OK"==e.status&&($(".gui .more").remove(),$(".gui ul").append(e.component))})})},agents:{initiated:!1,initiate:function(){t.func.is_element_on_screen($(".cs"),0)&&e.dynamic.agents.load(),$(window).on("scroll",function(){t.func.is_element_on_screen($(".cs"),0)&&e.dynamic.agents.load()})},load:function(){e.dynamic.agents.initiated||(e.dynamic.agents.initiated=!0,t.load_js(t.get_cdn_url()+"include/pw/_common/agents.min.js",function(){e.agents=new Agents,e.agents.initiate(".cs",function(){$(".cs .ld").remove()})}))}},tours_images:{initiated:!1,initiate:function(){t.func.is_element_on_screen($(".why"),0)&&e.dynamic.tours_images.load(),$(window).on("scroll",function(){t.func.is_element_on_screen($(".why"),0)&&e.dynamic.tours_images.load()})},load:function(){e.dynamic.tours_images.initiated||(e.dynamic.tours_images.initiated=!0,t.send_request("/pw_operator/load",{action:"images",id:e.get_operator_id()},function(e){if(e&&"OK"==e.status){if($(".pandl .p .lazy").remove(),$(".pandl .p").append(e.component),1==$(".pandl .p .im .l").length&&$(".pandl .p .im .arrow").remove(),$("body").hasClass("tab")){var t=Math.round($(".pandl .p .im").width()/1.5);$(".pandl .p .im").height(t),$(".pandl .p .im .arrow").width(t),$(".pandl .p .im .arrow.left").css("left",0-t/2),$(".pandl .p .im .arrow.right").css("right",0-t/2)}$(".pandl .p .im .arrow").click(function(){var e=$(this).parent().find(".l").length,t=$(this).parent().find(".show").index();if($(this).hasClass("right"))var n=t>e?3:t+2;else if($(this).hasClass("left"))n=t<3?e+2:t;$(this).parent().find(".l").removeClass("show"),(n=$(this).parent().find(".l:nth-child("+n+")")).data("bg")&&n.data("bg").length&&n.css("background-image",n.data("bg")).data("bg",""),n.addClass("show")})}}))}},tours:function(){$(".lf .sel").one("click",function(){t.send_request("/pw_operator/load",{action:"load_tours",id:e.get_operator_id()},function(e){"OK"==e.status&&e.component.length>0&&($.each(e.component,function(e,t){$(".lf select").append('<option value="'+t.id+'">'+t.name+"</option>")}),t.lib.init("selector",function(){var e=$(".lf select").selectivity({placeholder:"Select your tour"});e.selectivity("open"),$(".lf .sel").click(function(){e.selectivity("open")})}),$(".lf .sel").addClass("done"))})}),$(".lf .but").click(function(){var e=$(".lf select").val();e&&e>0?window.location.href="/t/"+e+"#reviews":($(".lf .sel").addClass("shake"),setTimeout(function(){$(".lf .sel").removeClass("shake")},1e3))})},fixed_elements:function(){var n=$(window).height(),i=$(".b.menu ul"),o=i.height(),a=i.offset().top,r=$(".bl .b.val"),s=r.height(),c=r.offset().top,l=$(".bl .b.aw, .bl .b.gu"),u=s;if(l.length>0){u=0;var d=l.first().offset().top;l.each(function(){u+=$(this).height()})}else d=s+c;$(window).resize(function(){i.width($(".b.menu").width())}),t.byWindowAction(["scroll"],function(){var c=$(window).scrollTop();if($("body").hasClass("tab"))var l=$("main");else l=$("main .br");var p=l.height()-20,f=l.offset().top;if(i.width($(".b.menu").width()),!i.hasClass("fixed")&&c>=a+o&&c<=p+n-f?i.addClass("fixed"):i.hasClass("fixed")&&c+o>p+f?i.css("top",0-(c+o-(p+f))):i.hasClass("fixed")&&c<a+o?i.removeClass("fixed"):i.hasClass("fixed")&&i.css("top",""),i.hasClass("fixed")){var h=[];if($(".br>div, .c>div, .br .b .b").each(function(){if($(this).attr("class").length>0){var e=$(this).attr("class").split(" "),n=$(this);$.each(e,function(e,i){var o=$(".menu").find('[data-anchor="'+i+'"]');if(0===o.length&&(o=$(".menu").find('[data-anchor="anchor-scroll--'+i+'"]')),o.length>0&&t.func.is_element_on_screen(n,44))h.push(o);else{var a=$(".menu").find('[data-anchor="anchor-scroll--tr-'+i+'"]');0===a.length&&(a=$(".menu").find('[data-anchor="tr '+i+'"]')),a.length>0&&t.func.is_element_on_screen(n,44)&&h.push(a)}})}}),h.length>0&&!h[0].hasClass("active")){$(".b.menu ul.fixed li").removeClass("active"),h[0].addClass("active");var m=h[0][0];m&&e.supportScrollIntoView&&m.scrollIntoView()}}$("body").hasClass("tab")||(!r.hasClass("fixed")&&c>=d+u&&c<=p+n-f-u-20?r.addClass("fixed"):r.hasClass("fixed")&&c+s>p+f?r.addClass("nn").css("top",0-(c+s-(p+f))):r.hasClass("fixed")&&c<d+u?r.removeClass("fixed").removeClass("nn"):r.hasClass("fixed")&&r.css("top",""))})}},e.highlights={container:null,shortElement:null,fullElement:null,readElement:null,initiate:function(){e.highlights.container=$(".hl"),e.highlights.shortElement=e.highlights.container.find(".desc.short"),e.highlights.fullElement=e.highlights.container.find(".desc.full"),e.highlights.readElement=e.highlights.container.find(".read"),e.highlights.readElement.click(function(t){var n;t.preventDefault(),e.highlights.shortElement.toggleClass("hid"),e.highlights.fullElement.toggleClass("hid"),n=e.highlights.shortElement.hasClass("hid")?"Show less":"Read more",e.highlights.readElement.text(n)})}},e.reviews={page:1,onpage:parseInt($(".b.rev").attr("data-onpage")),buttons:!1,stars:[],initiate:function(){e.reviews.unlock(),$("dl.bb.st dt").each(function(e){var t=parseInt($(this).attr("data-prc"));$(this).prepend('<div class="bar"><div class="fill"></div></div>'),$(this).find(".bar .fill").width(($("body").hasClass("mob")?1.1:1.3)*t),$(this).prepend('<div class="atm-m-stars"></div>');for(var n=1;n<=5;n++)$(this).find(".atm-m-stars").append('<div class="star '+(e<=5-n?"full":"empty")+'"></div>')}),$(".b.rev [data-s]").each(function(){$(this).css("cursor","pointer")}),$(".b.rev").on("click","[data-s]",function(){e.reviews.page=1;var n=$(this).data("s");if(e.reviews.stars.indexOf(n)>=0?e.reviews.stars.splice(e.reviews.stars.indexOf(n),1):e.reviews.stars.push(n),e.reviews.stars.length>0){var i=0;$(".b.rev .bb.st dd, .rev .bb.st dt").addClass("fade"),$.each(e.reviews.stars,function(e,t){i+=parseInt($('.b.rev [data-s="'+t+'"]').first().data("total")),$('.b.rev [data-s="'+t+'"]').removeClass("fade")})}else{i=parseInt($(".b.rev").attr("data-total"));$(".b.rev .bb.st dd, .rev .bb.st dt").removeClass("fade")}$(".b.rev .more").show(),$(".b.rev ul li").addClass("loading"),$(".b.rev ul li").first().append('<img class="l" src="/im/r/pw/tr-loader-small.gif">'),t.send_request("/pw_operator/load",{action:"reviews_more",id:e.get_operator_id(),page:e.reviews.page,rating:e.reviews.stars},function(t){t&&"OK"==t.status&&($(".b.rev ul li").remove(),$(".b.rev ul").append(t.component),e.reviews.page*e.reviews.onpage>=i&&$(".b.rev .more").hide())})}),$(".b.rev").on("click",".sh",function(){var e=$(this),n=e.parents("li"),i=n.attr("data-id");n.find(".tr").length?(n.find(".tr").toggleClass("hid"),"Hide"==e.text()?e.text("Read more"):e.text("Hide")):t.send_request("/pw_operator/load",{action:"get_review",id:i},function(t){if(t&&"OK"==t.status){var i=$('<div class="tr"></div>');t.component.source?i.html(t.component.comments):i.text(t.component.comments),n.find('div[itemprop="reviewBody"]').addClass("tr").addClass("hid").after(i),e.text("Hide")}})}),$(".b.rev .more .but").click(function(){if($(".b.rev .more").hide(),e.reviews.page++,e.reviews.stars.length>0){var n=0;$.each(e.reviews.stars,function(e,t){n+=parseInt($('.b.rev [data-s="'+t+'"]').first().data("total"))})}else n=parseInt($(".b.rev").attr("data-total"));t.send_request("/pw_operator/load",{action:"reviews_more",id:e.get_operator_id(),page:e.reviews.page,rating:e.reviews.stars.length>0&&e.reviews.stars},function(t){t&&"OK"==t.status&&($(".b.rev ul.list").append(t.component),e.reviews.page*e.reviews.onpage<n&&$(".b.rev .more").show())})})},unlock:function(){$(".rev ul").on("click",".unlock_op .sel:not(.with-code)",function(){0==$("#unlock-popup-link").length?t.send_request("/pw_operator/load",{action:"unlock_template"},function(e){e&&"OK"==e.status&&t.lib.init("popup",function(){$("body").append(e.component),$("#unlock-popup-link").magnificPopup({closeOnBgClick:!0,callbacks:{open:function(){t.send_google_event("Sale Popup","Show","operator-page-promo"),$("body").on("click","#unlock-popup .t7:not(.end), #unlock-popup .t6 a.grey",function(){$.magnificPopup.close()}),$("body").on("click","#unlock-popup .t7.end",function(){$.magnificPopup.open({closeOnBgClick:!0,items:{src:'<div id="main-popup">'+$("#terms-banner").html()+"</div>"}})}),$("#unlock-popup input").live("keyup",function(e){13==(e.keyCode?e.keyCode:e.which)&&$("#unlock-popup .t6 a:not(.grey)").click()}),$("#unlock-popup .t6 a:not(.grey)").live("click",function(){var e=$.trim($("#unlock-popup .t5 input").val());e&&t.func.check_string(e,"email")?($("#unlock-popup .t7").addClass("end"),$("#unlock-popup .t6 .title").html('<img src="/images/ajax_loader/small.gif" />'),$("#unlock-popup .t6 a:not(.grey)").addClass("grey"),$.ajax({url:"/welcome/add_email_banner",data:{email:e,banner:"operator-promo-code"},dataType:"json",type:"POST",success:function(e){"OK"==e.status?($("#unlock-popup .t5, #unlock-popup .t7").remove(),$("#unlock-popup .t2").html("Congratulations!<br>Your Promo Code has been unlocked").addClass("padd"),e.code?$("#unlock-popup .t3 .c2").html(e.code).addClass("n-line"):$("#unlock-popup .t3 .c2").html("BMFYS").addClass("n-line"),$("#unlock-popup .t3").addClass("un").after('<dic style="padding-bottom:10px;font-weight:bold">What\'s next</div>'),$("#unlock-popup .t4").html("Find your tour, click the 'Book Now' button and apply this Promo Code on the check out page to get your additional discount"),$("#unlock-popup .t6 a").addClass("grey").removeClass("blue"),$("#unlock-popup .t6 .title").text("Keep browsing"),t.send_google_event("Sale Popup","Unlock","operator-page-promo")):($("#unlock-popup .t6").removeClass("end"),$("#unlock-popup .t6 .title").html("Unlock&nbsp;Promo&nbsp;Code&nbsp;&raquo;"))},error:function(){$("#unlock-popup .t6").removeClass("end"),$("#unlock-popup .t6 .title").html("Unlock&nbsp;Promo&nbsp;Code&nbsp;&raquo;")}})):alert("Please enter valid email address")})}}}),$("#unlock-popup-link").click()})}):$("#unlock-popup-link").click()})}},e.faq_search={form:null,searchField:null,initialSearch:!0,initiate:function(){e.faq_search.form=$(".search-form"),e.faq_search.searchField=e.faq_search.form.find("input[name=search]"),e.faq_search.searchField.on("input propertychange paste",function(){""===$(this).val()&&(e.faq_search.initialSearch||e.faq_search.find())}),e.faq_search.form.submit(function(t){if(t.preventDefault(),""===e.faq_search.searchField.val().trim())return e.faq_search.searchField.focus().addClass("shake"),void setTimeout(function(){e.faq_search.searchField.removeClass("shake")},1e3);e.faq_search.find()})},find:function(){e.faq_search.searchField.val()?e.faq_search.initialSearch=!1:e.faq_search.initialSearch=!0,e.questions.page=1,e.questions.searchPhrase=e.faq_search.searchField.val(),e.questions.load_questions(),t.send_google_event("Q&A Search","Search",e.faq_search.searchField.val())}},e.questions={page:1,onpage:parseInt($(".b.faq").attr("data-onpage")),buttons:!1,initiate:function(){e.questions.show_buttons(),e.questions.check_viewport(),$(window).on("scroll",function(){e.questions.check_viewport()}),e.questions.check_mobile(),$(".b.faq").on("click",".use .but:not(.e)",function(){var e=$(this),n=e.attr("data-vote"),i=parseInt(e.attr("data-curr")),o=$(this).parents("li").attr("data-id");t.send_request("/faq/answer_vote",{answer_id:o,vote:n},function(t){t&&"OK"==t.status?e.find("span").html("("+(i+1)+")"):alert("You already voted for this answer.")})}),$(".b.faq").on("click",".more .but.load-more",function(){e.questions.page++,e.questions.load_questions()}),$(".b.faq").on("click",".more .but.ask-q",function(){$(".bl .val .but.a").click()})},show_buttons:function(){$(".b.faq").length>0&&$(window).scroll(function(){if(!e.questions.buttons&&$(window).scrollTop()+$(window).height()>=$(".b.faq").offset().top){e.questions.buttons=!0;var n=[];$(".faq > ul > li").each(function(){n.push($(this).attr("data-id"))}),n.length>0&&t.send_request("/pw_operator/load",{action:"questions_buttons",ids:n},function(e){if(e&&"OK"==e.status)for(var t in e.component)$('.faq > ul > li[data-id="'+t+'"] .use').html(e.component[t])})}})},check_viewport:function(){var e=$(window).scrollTop(),t=$(window).height();$(".b.faq .att.att-vid div").each(function(){e>=$(this).offset().top-t&&$(this).replaceWith('<iframe width="500" height="280" src="'+$(this).attr("data-src")+'" frameborder="0" allowfullscreen></iframe>')})},load_questions:function(){1==e.questions.page&&$(".b.faq > ul").html('<li class="empty loader"><img class="l" src="/im/r/pw/tr-loader-small.gif"></li>'),t.send_request("/faq/questions_load_more",{object_type:"operator",object_id:e.get_operator_id(),shift:(e.questions.page-1)*e.questions.onpage,onpage:e.questions.onpage,search_phrase:e.questions.searchPhrase,pw:!0},function(t){if($(".b.faq > ul .loader").remove(),t&&"OK"==t.status){t.html.length?$(".b.faq ul").append(t.html):$(".b.faq ul").html('<li class="empty"><b>We couldnâ€™t find any results for â€œ'+e.questions.searchPhrase+"â€</b><br />Try a different search term or ask your own question</li>"),e.questions.check_mobile();var n=!1;e.questions.page*e.questions.onpage>=t.total&&(n=!0);var i=$(".b.faq .more");i.find(".ask-q").toggleClass("hid",!n),i.find(".load-more").toggleClass("hid",n)}})},check_mobile:function(){$("body").hasClass("mob")&&$(window).scroll(function(){$(".faq .att").each(function(){var e=$(this).find("iframe, img");if(e.length>0){var t=e.width(),n=e.height();t>$(this).width()&&e.width($(this).width()).height(Math.floor($(this).width()*n/t))}})})}},e.hash={menu:function(){$(".b.menu li").click(function(){var t=$(this).attr("data-anchor").replace(" ","."),n=$(this).attr("data-hash");location.hash="#"+n;var i=$("."+t);0===i.length&&(i=$(".b."+t));var o=i[0];i.length>0&&(e.supportScrollIntoView?o.scrollIntoView():e.hash.scroll(i)),t.indexOf("gui")>=0&&$(".b.gui .more").length>0&&$(".b.gui .more .but").click()})},read:function(){if(location.hash.length>1){var t=location.hash.substr(1);switch(!0){case"tours"==t:case"reviews"==t:case"deals"==t:case"about"==t:case"guides"==t:case"faq"==t:case"ship"==t:case"ships"==t:case"transport"==t:case"transports"==t:case"video"==t:case"support"==t:case"awd"==t:var n=$('.b.menu li[data-hash="'+t+'"]');if(n.length>0){var i=n.attr("data-anchor").replace(" ","."),o=$("."+i);0===o.length&&(o=$(".b."+i)),o.length>0&&(e.hash.scroll(o,100),i.indexOf("gui")>=0&&$(".b.gui .more").length>0&&$(".b.gui .more .but").click())}}}},scroll:function(e,n){e.length>0&&setTimeout(function(){t.func.smooth_scroll($(window),e,300,function(){setTimeout(function(){$(".b.menu ul").hasClass("fixed")&&!e.hasClass($(".b.menu ul li").last().data("anchor"))&&t.func.smooth_scroll($(window),e.offset().top-$(".b.menu ul").height()-($("#tnb").height()?65:0),100)},300)})},n||0)}},e.ask={initiated:!1,initiate:function(){$(".bl .val .but.a, .hero .but.a").click(function(n){e.ask.initiated?$(".ask_link").click():(e.ask.initiated=!0,t.send_request("/pw_operator/load",{action:"ask_question",id:e.get_operator_id()},function(n){n&&"OK"==n.status&&($("main").append(n.component),$("#ask_popup .but.submit").click(function(t){t.preventDefault(),e.ask.ask_submit()}),t.lib.init("popup",function(){$(".ask_link").magnificPopup({closeOnBgClick:!0,callbacks:{open:function(){t.send_google_event("Ask A Question","Ask a question open","Operator - "+e.get_operator_name()),$("#ask_popup .overlay").find("textarea").val(""),t.lib.init("selector",function(){$("#ask_popup #tour-select-popup").selectivity({placeholder:"Select your tour"})}),$("body").on("click.outside-selectivity","#ask_popup *",function(){$("#ask_popup .selectivity-dropdown").length>0&&1==!$(this).closest(".selectivity-dropdown").length&&$("#ask_popup #tour-select-popup").selectivity("close")})},close:function(){$("body").off("click.outside-selectivity"),$(".selectivity-backdrop").remove()}}}),$(".ask_link_success").magnificPopup({closeOnBgClick:!0}),$("#ask_popup_success .but").click(function(e){$(this).hasClass("blue")||(e.preventDefault(),$.magnificPopup.close())}),$(".ask_link").click()}))}))})},ask_submit:function(){var e=$("#ask_popup"),n=e.find("form"),i=e.data("default"),o=$.trim(n.find("textarea").val()),a=$.trim(n.find('input[name="name"]').val()),r=n.find('input[name="email"]').length>0?$.trim(n.find('input[name="email"]').val()):null,s=$.trim(n.find('input[name="phone"]').val()),c=(n.find('select[name="date"]').val(),n.find('select[name="currency"]').val(),n.find('select[name="source"]').val(),$.trim(n.find('input[name="date_hid"]').val())),l=n.attr("data-promotion"),u=n.find("#tour-select-popup"),d=u.selectivity("data"),p=d.id,f=d.text,h=$("#ask_popup button"),m=!1;if(u.hasClass("opt")||p!=i?o?a?!(n.find('input[name="email"]').length>0)||r&&t.func.check_string(r,"email")?p==i&&(f="General Question"):m="Please enter valid email address.":m="Please enter your name.":m="Please enter your question.":m="Please select tour",m)alert(m);else{var v={type:"t",id:p,enquiry_source:"",email:r,details_phone:s,date:c,source:"tr",source_id:0,pax:1,name:a,details_type:4,promotion:l,comment:o};h.attr("disabled",!0),t.send_request(n.attr("action"),v,function(e){h.attr("disabled",!1),"OK"==e.status&&($("#ask_popup_success .but.blue").attr("href",e.href),$(".ask_link_success").click(),t.send_google_event("Ask A Question","Question Asked",f))})}}}}function TermsSalePopup(e){var t=this,n=null;t.load=function(i){$("body").on("click",".w-inf.tooltip a",function(){if(!$(this).hasClass("loading"))if($(this).addClass("loading"),n)t.showPopup();else{var i=$(".js-sale-line").data("id");e.lib.init("popup",function(){e.send_request("/pw_tour/load_terms_sale_layout/",{id:i},function(e){"OK"==e.status&&(n=e.html,t.showPopup()),$(this).removeClass("loading")})})}})},t.showPopup=function(){$.magnificPopup.open({items:{src:n},closeOnBgClick:!0})}}function UnlockSavingPopup(e){var t,n,i=this,o={sale:null,memberSaving:null},a=$(window);e.byUserInteraction("sale-loaded",function(){if($(".js-sale-line[data-id]").length){var t=$(".js-sale-line[data-id]"),n=t.data("id")+" - ";switch(e.parameters.page_type){case"homepage":n+="Homepage";break;case"tdp":n+="TDP";break;case"serp":n+="SERP";break;case"operator":n+="Operator";break;case"deals":n+="Deals";break;default:n+="Other"}e.sendTrackerEvent("Sale",t.hasClass("unlock")?"Locked":"Unlocked",n)}}),i.load=function(t){$("body").on("click",".unlock",function(){if($(this).hasClass("js-sale-line")&&$(this).data("link")){var n=$("main").data("page-type");e.send_google_event("Sale banner","Click",n||"Other"),$("main").length>0&&($("main").hasClass("mob")||$("main").hasClass("tab"))||$(window).width()<=1023?window.location.href=$(this).data("link"):window.open($(this).data("link"),"_blank")}else $(this).hasClass("unlocked")||i.initPopup($(this),t)}),"serp"===e.parameters.page_type&&i.googleEvents()},i.initPopup=function(t,n){var a={id:t.data("id")?parseInt(t.data("id")):null,value:t.data("value")};i.updateValue=a.value?a.value:null;var r=a.id?"sale":"memberSaving";o[r]?i.showPopup(o[r],a.id,n):e.send_request("/pw_tour/load_unlock_layout/",a,function(e){"OK"==e.status&&(o[r]=e.html,i.showPopup(o[r],a.id,n))})},i.initOnScroll=function(o){o.length&&(t=o,n=o.offset().top,e.byWindowAction(["scroll"],i.onScroll),i.onScroll())},i.onScroll=function(){var e=a.scrollTop()>n,i="";e&&(i=t.height()),t.parent().css("height",i),t.toggleClass("fixed",e),e?t.parent().height(t.height()):t.parent().height("")},i.showPopup=function(t,n,o){e.lib.init("popup",function(){$.magnificPopup.close(),$.magnificPopup.open({items:{src:t},closeOnBgClick:!0,callbacks:{open:function(){var e=$(".unlockSavingPopup");e.off();var t=e.find("form");i.updateValue&&e.find(".value").length&&e.find(".value").html(i.updateValue),t.find("input").on("keydown",function(e){$(this).hasClass("error")&&$(this).removeClass("error"),13===e.keyCode&&t.submit()}),t.on("submit",function(e){return e.preventDefault(),i.checkForm($(this),n,o),!1}),t.find(".but").on("click",function(e){return e.preventDefault(),t.submit(),!1}),e.find(".terms-link").on("click",function(e){return e.preventDefault(),i.showTerms(),!1})}}})})},i.checkForm=function(t,n,o){t.find("input").removeClass("error");var a=!1,r=$.trim(t.find('input[name="name"]').val()),s=$.trim(t.find('input[name="email"]').val());r||(a=!0,t.find('input[name="name"]').addClass("error")),s&&e.func.check_string(s,"email")||(a=!0,t.find('input[name="email"]').addClass("error")),a||i.success(r,s,n,o,t.parents(".popup").length?"Popup":"Header")},i.success=function(t,n,o,a,r){e.send_request("/pw_tour/save_unlock/",{name:t,email:n,saleId:o},function(n){"OK"==n.status&&(i.showSuccess(n.html.replace("-NAME-",t),a),e.send_google_event("Sale",o?"Global or STR Sale Unlocked":"Member's Saving Sale Unlocked",r,{tourPrice:10,currencyCode:"USD"}))})},i.showSuccess=function(t,n){e.lib.init("popup",function(){$.magnificPopup.close(),$.magnificPopup.open({items:{src:t.replace("-NAME-",name)},closeOnBgClick:!0,callbacks:{open:function(){$(".unlockSavingPopupSuccess").off().on("click",".but",function(e){e.preventDefault(),$.magnificPopup.close()})},close:function(){n?n():location.reload()}}})})},i.showTerms=function(){$(".mfp-wrap").addClass("popup--wide"),$(".unlockSavingPopup").find(".content, .terms-content").toggleClass("hid").off("click.terms").on("click.terms",".terms-content .but",function(e){return e.preventDefault(),i.hideTerms(),!1})},i.hideTerms=function(){$(".mfp-wrap").removeClass("popup--wide"),$(".unlockSavingPopup").find(".content, .terms-content").toggleClass("hid")},i.showTermsPopup=function(t){e.lib.init("popup",function(){$.magnificPopup.close(),$.magnificPopup.open({items:{src:t},mainClass:"popup--wide",closeOnBgClick:!0})})},i.googleEvents=function(){$(".list").on("click",".unlock",function(){e.send_google_event("Sale","Open Popup Form","SERP - Tour card")}),$(".js-sale-line.unlock").click(function(){e.send_google_event("Sale","Open Popup Form","SERP - Banner")})}}window.addEventListener("load",function(){(new Operator).initiate()});